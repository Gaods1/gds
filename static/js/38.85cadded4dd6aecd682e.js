webpackJsonp([38],{DBd1:function(e,t){},E1NG:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("D4TX"),n=r("GOyC"),i=r("R5Jg"),o=r("93JQ"),s=(r("8V1Y"),r("lYIU")),l=r("1ILc"),c={data:function(){var e=this;return{check_state_arr:{1:"待审核",2:"通过",3:"未通过"},state_arr:{1:"允许展示",2:"暂停展示",3:"已经删除",4:"保存草稿箱"},req_form_type_arr:{1:"需求说明书",2:"转述",3:"其他"},use_type_arr:{1:"授权",2:"转让"},obtain_type_arr:{1:"采集员",2:"需求持有人",3:"需求持有人企业"},dialogTitle:"",dialogFormVisible:!1,serial:"",rules:{opinion:[{required:!0,message:"该项为必填项",trigger:"blur"}],broker_code:[{required:!0,message:"该项为必填项",trigger:"blur"}]},currentEditLine:0,select_word:"",formData:{},handleType:"new",formBtnList:[{label:"取消",type:"info",show:!1,icon:"",plain:!0,disabled:!1,method:"handleCancle"},{label:"提交",type:"success",icon:"",show:!0,plain:!1,disabled:!1,method:"handleIdent"}],formOptions:{labelWidth:"120px"},formItems:[{prop:"result",text:"审核结果",label:"审核结果",type:"switch",change:function(t){e.formItems[1].show=2==t},eleProps:{"inactive-value":3,"active-value":2,"active-text":"通过","inactive-text":"不通过"}},{prop:"broker_code",text:"技术经纪人",label:"技术经纪人",type:"select",show:!1,eleProps:{size:"medium",filterable:!0,placeholder:"请选择或搜索"},options:[]},{prop:"opinion",text:"审核意见",label:"审核意见",type:"input",eleProps:{type:"textarea",rows:4,placeholder:"请输入审核意见"}}],handleConfig:{searchTerms:[{value:"req_name",label:"需求名称"},{value:"r_abstract",label:"需求简述"}],newItemTxt:!1,delBtn:!1,auditBtn:!1},total:0,list:[],columns:[{prop:"req_name",label:"需求名称",align:"center",width:100,formatter:function(e,t,r){return e.Requirements.req_name}},{prop:"req_form_type",label:"形式类型",align:"center",width:100,formatter:function(t,r,a){return e.req_form_type_arr[t.Requirements.req_form_type]}},{prop:"state",label:"审核状态",align:"center",width:100,render:function(t,r){return t("el-tag",{props:{type:2===r.row.state?"success":3===r.row.state?"danger":"info"}},e.check_state_arr[r.row.state])}},{prop:"use_type",label:"使用方式",align:"center",width:100,formatter:function(t,r,a){return e.use_type_arr[t.Requirements.use_type]}},{prop:"obtain_type",label:"获取方式",align:"center",width:100,formatter:function(t,r,a){return e.obtain_type_arr[t.Requirements.obtain_type]}},{prop:"show_state",label:"需求状态",align:"center",width:100,render:function(t,r){return t("el-tag",{props:{type:1===r.row.Requirements.show_state?"success":2===r.row.Requirements.show_state?"danger":"info"}},e.state_arr[r.row.Requirements.show_state])}},{prop:"expiry_dateb",label:"授权合作开始时间",align:"center",width:150,formatter:function(e,t,r){return e.Requirements.expiry_dateb}},{prop:"expiry_datee",label:"授权合作结束时间",align:"center",width:150,formatter:function(e,t,r){return e.Requirements.expiry_datee}},{prop:"insert_time",label:"创建时间",align:"center",width:150,formatter:function(e,t,r){return e.Requirements.insert_time}}],operates:{width:200,fixed:"right",list:[{label:"详情",type:"primary",show:function(e,t){return!0},icon:"el-icon-info",plain:!0,disabled:!1,method:function(t,r){e.handleDetail(t,r)}},{label:"审核",type:"warning",show:function(e,t){return 1==t.state},icon:"el-icon-edit",plain:!0,disabled:!1,method:function(t,r){e.handleCheck(t,r)}}]},pagination:{pageIndex:1,pageSize:10,show:!0,total:0},options:{stripe:!0,loading:!1,highlightCurrentRow:!0,mutiSelect:!0}}},components:{jsonForm:o.a,curmbs:a.a,handleBox:n.a,opTable:i.a},methods:{handleIdent:function(){var e=this;if(!this.$refs.formData.validateForm())return!1;1===this.formData.result?this.rowData.state=3:this.rowData.state=this.formData.result,this.rowData.broker_code=this.formData.broker_code,this.rowData.opinion=this.formData.opinion,Object(s.a)(this.rowData.serial,this.rowData).then(function(t){if(t.detail)return e.$message.error(t.detail),!1;e.dialogFormVisible=!1,e.$message({type:"success",message:"审核成功!"}),e.getList()})},handleCheck:function(e,t){this.getBrokerList(),this.formItems[1].show=!1,this.dialogTitle="审核",this.handleType="edit",this.rowData=e,this.dialogFormVisible=!0,console.log(e.state),this.$set(this.formData,"result",e.state),this.$set(this.formData,"broker_code",e.broker_code),this.$set(this.formData,"opinion",e.opinion)},handleClose:function(e){this.$refs.formDialog.$children[0].$refs.formData.clearValidate(),e()},getBrokerList:function(){var e=this;Object(l.d)({params:{page_size:"max"}}).then(function(t){t.detail&&e.$message.error(t.detail),e.formItems[1].options=[];for(var r=0;r<t.results.length;r++){var a={};a.label=t.results[r].broker_name,a.value=t.results[r].broker_code,e.formItems[1].options.push(a)}})},search:function(e,t){this.select_word=t,this.getList()},getList:function(){var e=this;this.options.loading=!0,Object(s.b)({params:{page:this.pagination.pageIndex,page_size:this.pagination.pageSize,search:this.select_word}}).then(function(t){t.detail&&e.$message.error(t.detail),e.total=t.count,e.pagination.total=Number(t.count),e.list=t.results,e.options.loading=!1})},handleSizeChange:function(e){this.pagination=e,this.getList()},handleIndexChange:function(e){this.pagination=e,this.getList()},handleSelectionChange:function(e){console.log("val:",e)},handleDetail:function(e,t){this.$router.push({name:"requirement_apply_detail",query:{serial:e.serial}})}}},d={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"warp-box"},[r("curmbs"),e._v(" "),r("div",{staticClass:"container"},[r("handleBox",{attrs:{handleConfig:e.handleConfig},on:{search:e.search}}),e._v(" "),r("opTable",{attrs:{list:e.list,total:e.total,options:e.options,pagination:e.pagination,columns:e.columns,operates:e.operates,getList:e.getList},on:{handleSizeChange:e.handleSizeChange,handleIndexChange:e.handleIndexChange,handleSelectionChange:e.handleSelectionChange}}),e._v(" "),r("el-dialog",{ref:"formDialog",attrs:{title:e.dialogTitle,visible:e.dialogFormVisible,"before-close":e.handleClose,modal:!1,"lock-scroll":!0},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[r("jsonForm",{ref:"formData",attrs:{formBtnList:e.formBtnList,handleType:e.handleType,formData:e.formData,rules:e.rules,formItems:e.formItems,formOptions:e.formOptions},on:{handleCancle:function(t){e.dialogFormVisible=!1},handleIdent:e.handleIdent}})],1)],1)],1)},staticRenderFns:[]};var h=r("C7Lr")(c,d,!1,function(e){r("DBd1")},"data-v-7b4bd7a7",null);t.default=h.exports},lYIU:function(e,t,r){"use strict";r.d(t,"a",function(){return i}),r.d(t,"b",function(){return o}),r.d(t,"c",function(){return s});var a=r("pxwZ"),n="/achievement/requirement/",i=function(e,t){return Object(a.c)(n+e+"/",t)},o=function(e){return Object(a.b)(n,e)},s=function(e){return Object(a.b)(n+e+"/")}}});