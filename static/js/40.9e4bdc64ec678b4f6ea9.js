webpackJsonp([40],{"E2/B":function(e,t){},U4Nk:function(e,t,a){"use strict";a.d(t,"b",function(){return o}),a.d(t,"a",function(){return r}),a.d(t,"c",function(){return s});var n=a("pxwZ"),i="/project/project_match_cer/",o=function(e){return Object(n.b)(i,e)},r=function(e,t){return Object(n.c)(i+e+"/",t)},s=function(e){return Object(n.b)(i+e+"/")}},nlBd:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("D4TX"),i=a("GOyC"),o=a("R5Jg"),r=a("93JQ"),s=a("U4Nk"),l={data:function(){var e=this;return{searchplaceholder:"请输入项目名称",dialogTitle:"",dialogFormVisible:!1,serial:"",rules:{cmsg:[{required:!0,message:"请输入审核意见",trigger:"blur"}]},currentEditLine:0,select_word:"",formData:{},handleType:"new",formBtnList:[{label:"取消",type:"info",show:!1,icon:"",plain:!0,disabled:!1,method:"handleCancle"},{label:"提交",type:"success",icon:"",show:!0,plain:!1,disabled:!1,method:"handleIdent"}],formOptions:{},formItems:[{prop:"cstate",text:"审核结果",label:"审核结果",type:"switch",eleProps:{"inactive-value":-1,"active-value":1,"active-text":"通过","inactive-text":"不通过"}},{prop:"cmsg",text:"审核意见",label:"审核意见",type:"input",eleProps:{type:"textarea",rows:4,placeholder:"请输入审核意见"}}],handleConfig:{searchTerms:[{value:"rm_title",label:"项目名称"}],newItemTxt:!1,delBtn:!1},total:0,list:[],columns:[{prop:"rm_title",label:"项目名称",align:"center",width:350},{prop:"rm_state",label:"状态",align:"center",width:180,render:function(t,a){return t("el-tag",{props:{type:1===a.row.rm_state?"":2===a.row.rm_state?"success":3===a.row.rm_state?"danger":4===a.row.rm_state?"warning":"info"}},e.formatRmState(a.row.rm_state))}},{prop:"rm_type",label:"申请类型",align:"center",width:180,formatter:function(t,a,n){return e.formatRmType(t.rm_type)}},{prop:"rm_time",label:"申请时间",align:"center",width:180},{prop:"insert_time",label:"创建时间",align:"center",width:180}],operates:{width:200,fixed:"right",list:[{label:"详情",type:"primary",show:function(t,a){return a.rm_state,e.operates.width=200,!0},icon:"el-icon-info",plain:!0,disabled:!1,method:function(t,a){e.handleDetail(t,a)}},{label:"审核",type:"warning",show:function(e,t){return 1==t.rm_state},icon:"el-icon-edit",plain:!0,disabled:!1,method:function(t,a){e.handleCheck(t,a)}}]},pagination:{pageIndex:1,pageSize:10,show:!0,total:0},options:{index:!0,stripe:!0,loading:!1,highlightCurrentRow:!0,mutiSelect:!1}}},components:{jsonForm:r.a,curmbs:n.a,handleBox:i.a,opTable:o.a},mounted:function(){},methods:{formatRmType:function(e){var t="不详";switch(e){case 1:t="申请人已经匹配";break;case 2:t="通过成果进行申请";break;case 3:t="通过需求进行申请"}return t},formatRmState:function(e){var t="不详";switch(e){case 0:t="草稿箱";break;case 1:t="提交待审核";break;case 2:t="审核通过";break;case 3:t="审核不通过";break;case 4:t="申请者放弃"}return t},handleClose:function(e){this.$refs.formDialog.$children[0].$refs.formData.clearValidate(),e()},handleCofirm:function(e){},newItem:function(){},search:function(e,t){console.log("search:"+e+","+t),this.select_word=t,this.getList()},delAll:function(){},getList:function(){var e=this;this.options.loading=!0,Object(s.b)({params:{rm_state:1,page:this.pagination.pageIndex,page_size:this.pagination.pageSize,search:this.select_word}}).then(function(t){t.detail&&e.$message.error(t.detail),console.info(t),e.total=t.count,e.pagination.total=Number(t.count),e.list=t.results,e.options.loading=!1})},handleSizeChange:function(e){this.pagination=e,console.log("handleSizeChange:"+this.pagination.pageSize),this.getList()},handleIndexChange:function(e){this.pagination=e,console.log("handleIndexChange:"+this.pagination.pageIndex),this.getList()},handleSelectionChange:function(e){},handleEdit:function(e,t){},handleDel:function(e,t){},handleDetail:function(e,t){this.$router.push({name:"project_match_detail",query:{serial:e.rm_serial}})},handleCheck:function(e,t){this.dialogTitle="审核",this.handleType="edit",console.info(e),this.serial=e.rm_serial,this.$set(this.formData,"rm_code",e.rm_code),this.$set(this.formData,"cstate",-1),this.$set(this.formData,"cmsg",""),console.info(this.formData),this.dialogFormVisible=!0},handleIdent:function(){var e=this;console.info(this.formData),this.formData.cmsg?Object(s.a)(this.serial,this.formData).then(function(t){t.detail?e.$message.error(t.detail):1==t.state?(e.$message({type:"success",message:"审核成功!"}),e.dialogFormVisible=!1,e.getList()):e.$message({type:"error",message:t.msg})}):this.$message({type:"error",message:"审核意见不能为空"})}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"warp-box"},[a("curmbs"),e._v(" "),a("div",{staticClass:"container"},[a("handleBox",{attrs:{handleConfig:e.handleConfig,searchplaceholder:e.searchplaceholder},on:{delAll:e.delAll,search:e.search,newItem:e.newItem}}),e._v(" "),a("opTable",{attrs:{list:e.list,total:e.total,options:e.options,pagination:e.pagination,columns:e.columns,operates:e.operates,getList:e.getList},on:{handleSizeChange:e.handleSizeChange,handleIndexChange:e.handleIndexChange,handleSelectionChange:e.handleSelectionChange}}),e._v(" "),a("el-dialog",{ref:"formDialog",attrs:{title:e.dialogTitle,visible:e.dialogFormVisible,"before-close":e.handleClose,modal:!1,"lock-scroll":!0},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("jsonForm",{attrs:{formBtnList:e.formBtnList,handleType:e.handleType,formData:e.formData,rules:e.rules,formItems:e.formItems,formOptions:e.formOptions},on:{handleCancle:function(t){e.dialogFormVisible=!1},handleIdent:e.handleIdent}})],1)],1)],1)},staticRenderFns:[]};var h=a("C7Lr")(l,c,!1,function(e){a("E2/B")},"data-v-5b8c2efb",null);t.default=h.exports}});