webpackJsonp([91],{"Y/kr":function(e,t){},vDLT:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("D4TX"),o=a("GOyC"),s=a("R5Jg"),n=a("93JQ"),l=a("pxwZ"),r="/system/param/",p=function(e){return Object(l.b)(r,e)},m={data:function(){var e=this;return{dialogTitle:"",pparamAll:[{value:0,label:"一级分类"}],dialogFormVisible:!1,serial:"",currentEditLine:0,select_word:"",formData:{},handleType:"new",formOptions:{labelWidth:"100px"},rules:{param_name:[{required:!0,message:"请输入参数名称",trigger:"blur"}],pparam_code:[{required:!0,message:"请选择参数组",trigger:"blur"}],param_memo:[{required:!0,message:"请填写描述信息",trigger:"blur"}],param_value:[{required:!0,message:"请填写参数值",trigger:"blur"}]},formItems:[{prop:"pparam_code",text:"所属参数组",label:"所属参数组",type:"select",eleProps:{placeholder:"请选择参数组"},options:[]},{prop:"param_name",text:"参数名称",label:"参数名称",type:"input",eleProps:{placeholder:"请填写参数名称"}},{prop:"param_memo",text:"参数描述",label:"参数描述",type:"input",eleProps:{placeholder:"请填写参数描述",type:"textarea"}},{prop:"param_value",text:"参数值",label:"参数值",type:"input",eleProps:{placeholder:"填写参数值"}}],handleConfig:{searchTerms:[{value:"1",label:"条件一"},{value:"2",label:"条件二"},{value:"3",label:"条件三"}],newItemTxt:"创建参数",delBtn:!1,auditBtn:!1},total:0,list:[],columns:[{prop:"pparam",label:"所属参数组",align:"center",width:180},{prop:"param_name",label:"参数名称",align:"center",width:120},{prop:"param_memo",label:"参数描述",align:"center",width:"160"},{prop:"param_value",label:"参数值",align:"center",width:180},{prop:"insert_time",label:"创建日期",align:"center",width:180},{prop:"creater",label:"创建人",align:"center",width:180}],operates:{width:200,fixed:"right",list:[{label:"编辑",type:"warning",show:function(e,t){return!0},icon:"el-icon-edit",plain:!0,disabled:!1,method:function(t,a){e.handleEdit(t,a)}},{label:"删除",type:"danger",icon:"el-icon-delete",show:!0,plain:!1,disabled:!1,method:function(t,a){e.handleDel(t,a)}}]},pagination:{pageIndex:1,pageSize:10,show:!0,total:0},options:{stripe:!0,loading:!1,highlightCurrentRow:!0,mutiSelect:!0}}},components:{jsonForm:n.a,curmbs:i.a,handleBox:o.a,opTable:s.a},methods:{handleSelectAccount:function(e){console.log(e)},createStateFilter:function(e){return function(t){return 0===t.value.toLowerCase().indexOf(e.toLowerCase())}},handleClose:function(e){this.$refs.formDialog.$children[0].$refs.formData.clearValidate(),e()},handleCofirm:function(e){var t,a,i,o=this;""==e.pparam_code?e.pparam_code=0:void 0==e.pparam_code?e.pparam_code=0:e.pparam_code,console.log("formatter:"+e),e.param_name&&e.param_memo&&e.param_value?"edit"==this.handleType?(a=this.serial,i=e,Object(l.c)(r+a+"/",i)).then(function(e){e.detail&&o.$message.error(e.detail),location.reload(),console.log(1),o.list.splice(o.currentEditLine,1,e),o.dialogFormVisible=!1,o.$message({type:"success",message:"编辑成功!"})}):(t=e,Object(l.d)(r,t)).then(function(e){e.detail&&o.$message.error(e.detail),o.list.splice(0,0,e),o.dialogFormVisible=!1,o.$message({type:"success",message:"添加成功!"})}):this.$message({type:"warning",message:"参数不能为空!"})},newItem:function(){this.getPParam();for(var e=0;e<this.formItems.length;e++)this.$set(this.formItems[e].eleProps,"disabled",!1),"switch"==this.formItems[e].type?this.$set(this.formData,this.formItems[e].prop,0):this.$set(this.formData,this.formItems[e].prop,"");this.dialogTitle="创建参数",this.currentEditLine=0,this.handleType="new",this.dialogFormVisible=!0},search:function(e,t){console.log("search:"+e+","+t),this.select_word=t,this.getList()},delAll:function(){console.log("delAll")},getPParam:function(){var e=this;p({params:{admin:"True",pageSize:"max",pparam_code:0}}).then(function(t){for(var a in t.detail&&e.$message.error(t.detail),e.pparamAll.length=1,t.results)e.pparamAll.push({value:t.results[a].param_code,label:t.results[a].param_name});for(var a in e.formItems)"pparam_code"==e.formItems[a].prop&&e.$set(e.formItems[a],"options",e.pparamAll)})},getList:function(){var e=this;this.options.loading=!0,p({params:{page:this.pagination.pageIndex,page_size:this.pagination.pageSize,search:this.select_word}}).then(function(t){t.detail&&e.$message.error(t.detail),e.total=t.count,e.pagination.total=Number(t.count),e.list=t.results,e.options.loading=!1})},handleSizeChange:function(e){this.pagination=e,console.log("handleSizeChange:"+this.pagination.pageSize),this.getList()},handleIndexChange:function(e){this.pagination=e,console.log("handleIndexChange:"+this.pagination.pageIndex),this.getList()},handleSelectionChange:function(e){console.log("val:",e)},handleEdit:function(e,t){this.currentEditLine=t,this.dialogTitle="编辑",this.handleType="edit",this.serial=e.serial,this.getPParam();for(var a=0;a<this.formItems.length;a++)void 0!==e[this.formItems[a].prop]&&(e[this.formItems[a].prop]?(this.$set(this.formData,this.formItems[a].prop,e[this.formItems[a].prop]),"pparam_code"==this.formItems[a].prop&&0==e.pparam_code?(this.$set(this.formData,"pparam_code",0),this.$set(this.formItems[a].eleProps,"disabled",!0)):this.$set(this.formItems[a].eleProps,"disabled",!1)):this.$set(this.formData,this.formItems[a].prop,""));console.log(this.formItems),this.dialogFormVisible=!0},handleDel:function(e,t){var a=this;"File_Head_Path"==e.param_name?this.$message({type:"warning",message:"此条数据用来修改系统名称，不能删除！！！"}):this.$confirm("此操作将永久删除该参数, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var i;(i=e.serial,Object(l.a)(r+i+"/")).then(function(e){e.detail&&a.$message.error(e.detail),a.list.splice(t,1)}).then(function(){a.$message({type:"success",message:"删除成功!"})})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})}}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"warp-box"},[a("curmbs"),e._v(" "),a("div",{staticClass:"container"},[a("handleBox",{attrs:{handleConfig:e.handleConfig},on:{delAll:e.delAll,search:e.search,newItem:e.newItem}}),e._v(" "),a("opTable",{attrs:{list:e.list,total:e.total,options:e.options,pagination:e.pagination,columns:e.columns,operates:e.operates,getList:e.getList},on:{handleSizeChange:e.handleSizeChange,handleIndexChange:e.handleIndexChange,handleSelectionChange:e.handleSelectionChange}}),e._v(" "),a("el-dialog",{ref:"formDialog",attrs:{title:e.dialogTitle,visible:e.dialogFormVisible,"before-close":e.handleClose,modal:!1,"lock-scroll":!0},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("jsonForm",{attrs:{handleType:e.handleType,formData:e.formData,rules:e.rules,formItems:e.formItems,formOptions:e.formOptions},on:{handleCofirm:e.handleCofirm,handleCancle:function(t){e.dialogFormVisible=!1}}})],1)],1)],1)},staticRenderFns:[]};var h=a("C7Lr")(m,d,!1,function(e){a("Y/kr")},"data-v-15e1bd2f",null);t.default=h.exports}});