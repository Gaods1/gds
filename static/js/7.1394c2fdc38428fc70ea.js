webpackJsonp([7],{"/noD":function(e,t){},Nb2t:function(e,t){},dmFd:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("D4TX"),o=a("GOyC"),i=a("R5Jg"),s=a("qeYQ"),n=a("9pcb"),l={data:function(){var e=this;return{dialogTitle:"",dialogFormVisible:!1,serial:"",ruleType:1,currentEditLine:0,select_word:"",formData:{},handleType:"new",formOptions:{},formItems:[{prop:"title",text:"标题",label:"标题名称",type:"input",eleProps:{placeholder:"请输入标题名称"}},{prop:"state",text:"状态",label:"标题名称",type:"input",eleProps:{placeholder:"请输入标题名称"}},{prop:"type",text:"类型",label:"类型",type:"select",eleProps:{placeholder:"请输入邮箱"},options:[{value:1,label:"成果"},{value:2,label:"需求"},{value:3,label:"项目"},{value:4,label:"角色"}]},{prop:"code",text:"编码",label:"编码",type:"input",eleProps:{placeholder:"请输入编码"}},{prop:"phone",text:"电话",label:"电话",type:"input",eleProps:{placeholder:"请输入电话"}},{prop:"email",text:"邮箱",label:"邮箱",type:"input",eleProps:{placeholder:"请输入邮箱"}},{prop:"content",text:"问题详情",label:"问题详情",type:"editor",eleProps:{placeholder:"请输入编码"},defaultValue:""},{prop:"url",text:"跳转链接",label:"问题详情",type:"input",eleProps:{placeholder:"请输入编码"}},{prop:"name",text:"跳转链接",label:"问题详情",type:"input",eleProps:{placeholder:"请输入编码"}}],handleConfig:{searchTerms:[{value:"1",label:"条件一"},{value:"2",label:"条件二"},{value:"3",label:"条件三"}],newItemTxt:"",delBtn:!1},total:0,list:[],columns:[{prop:"title",label:"标题",align:"center"},{prop:"type",label:"类型",align:"center",width:"160",render:function(e,t){return e("el-tag",1===t.row.type?"成果":2===t.row.type?"需求":3===t.row.type?"项目":5===t.row.type?"领域专家":6===t.row.type?"技术经纪人":7===t.row.type?"技术团队":8===t.row.type?"信息采集员":9===t.row.type?"其他":"科技人才")}},{prop:"state",label:"状态",align:"center",width:"160",render:function(e,t){return e("el-tag",{props:{type:0===t.row.state?"danger":"success"}},0===t.row.state?"未解决":"已解决")}},{prop:"account",label:"负责人",align:"center"},{prop:"phone",label:"联系方式",align:"center"},{prop:"email",label:"邮箱",align:"center"}],operates:{width:200,fixed:"right",list:[{label:"详情",type:"primary",show:function(e,t){return!0},icon:"el-icon-info",plain:!0,disabled:!1,method:function(t,a){e.handleEdit(t,a)}},{label:"删除",type:"danger",icon:"el-icon-delete",show:!0,plain:!1,disabled:!1,method:function(t,a){e.handleDel(t,a)}}]},pagination:{pageIndex:1,pageSize:10,show:!0,total:0},options:{stripe:!0,loading:!1,highlightCurrentRow:!0,mutiSelect:!0}}},components:{jsonForm:s.a,curmbs:r.a,handleBox:o.a,opTable:i.a},computed:{rulesList:function(){return"edit"==this.handleType?this.rules3:1==this.ruleType?this.rules:this.rules2},showType:function(){var e="";return 1==this.formData.type&&(e="成果"),2==this.formData.type&&(e="需求"),3==this.formData.type&&(e="项目"),5==this.formData.type&&(e="领域专家"),6==this.formData.type&&(e="技术经纪人"),7==this.formData.type&&(e="技术团队"),8==this.formData.type&&(e="信息采集员"),9==this.formData.type&&(e="其他"),e}},methods:{routerUrl:function(){null!=this.formData.url?this.$router.push(this.formData.url):this.$message.error("无法跳转")},resolved:function(){var e=this,t={state:1};console.log(t),Object(n.f)(this.serial,t).then(function(t){e.dialogFormVisible=!1,e.$message({type:"success",message:"解决成功!"}),e.getList()},function(e){})},handleOpen:function(){var e=this;this.$nextTick(function(){for(var t=0;t<e.formItems.length;t++)e.formItems[t].defaultValue=e.formData.content})},handleClose:function(e){e()},handleCofirm:function(e){var t=this;if(!result)return!1;"edit"==this.handleType?editAccount(this.serial,e).then(function(e){if(e.detail)return t.$message.error(e.detail),!1;t.list.splice(t.currentEditLine,1,e),t.$refs.formData.resetDeptCarser(),t.dialogFormVisible=!1,t.$message({type:"success",message:"编辑成功!"})}):Object(n.b)(e).then(function(e){if(e.detail)return t.$message.error(e.detail),!1;t.list.splice(0,0,e),t.$refs.formData.resetDeptCarser(),t.dialogFormVisible=!1,t.$message({type:"success",message:"添加成功!"})})},newItem:function(){for(var e=0;e<this.formItems.length;e++)"switch"==this.formItems[e].type?this.$set(this.formData,this.formItems[e].prop,1):"account_type"==this.formItems[e].prop?(this.$set(this.formItems[0],"show",!0),this.$set(this.formData,this.formItems[e].prop,1)):this.$set(this.formData,this.formItems[e].prop,null),"account"==this.formItems[e].prop&&(this.formItems[e].eleProps.disabled=!0,this.$set(this.formItems[0],"show",!0));this.dialogTitle="新增留言",this.currentEditLine=0,this.handleType="new",this.dialogFormVisible=!0},search:function(e,t){console.log("search:"+e+","+t),this.select_word=t,this.getList()},delAll:function(){console.log("delAll")},getList:function(){var e=this;this.options.loading=!0,Object(n.m)({params:{page:this.pagination.pageIndex,page_size:this.pagination.pageSize,search:this.select_word}}).then(function(t){t.detail&&e.$message.error(t.detail),e.total=t.count,e.pagination.total=Number(t.count),e.list=t.results,e.options.loading=!1})},handleSizeChange:function(e){this.pagination=e,console.log("handleSizeChange:"+this.pagination.pageSize),this.getList()},handleIndexChange:function(e){this.pagination=e,console.log("handleIndexChange:"+this.pagination.pageIndex),this.getList()},handleSelectionChange:function(e){console.log("val:",e)},handleEdit:function(e,t){this.currentEditLine=t,this.dialogTitle="查看留言详情",this.handleType="edit",this.serial=e.serial;for(var a=0;a<this.formItems.length;a++)void 0!==e[this.formItems[a].prop]&&(e[this.formItems[a].prop]?this.$set(this.formData,this.formItems[a].prop,e[this.formItems[a].prop]):this.$set(this.formData,this.formItems[a].prop,null)),"account"==this.formItems[a].prop&&(this.formData.account?this.formItems[a].eleProps.disabled=!0:this.formItems[a].eleProps.disabled=!1,this.$set(this.formItems[0],"show",!1));this.dialogFormVisible=!0},handleDel:function(e,t){var a=this;this.$confirm("此操作将永久删除该账户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(n.c)(e.serial).then(function(e){e.detail&&a.$message.error(e.detail),a.list.splice(t,1)}).then(function(){a.$message({type:"success",message:"删除成功!"})})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})}},create:function(){this.getAllDept()}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"warp-box"},[a("curmbs"),e._v(" "),a("div",{staticClass:"container"},[a("handleBox",{attrs:{handleConfig:e.handleConfig},on:{delAll:e.delAll,search:e.search,newItem:e.newItem}}),e._v(" "),a("opTable",{attrs:{list:e.list,total:e.total,options:e.options,pagination:e.pagination,columns:e.columns,operates:e.operates,getList:e.getList},on:{handleSizeChange:e.handleSizeChange,handleIndexChange:e.handleIndexChange,handleSelectionChange:e.handleSelectionChange}}),e._v(" "),a("el-dialog",{ref:"formDialog",attrs:{title:e.dialogTitle,visible:e.dialogFormVisible,"before-close":e.handleClose,modal:!1,"lock-scroll":!0},on:{"update:visible":function(t){e.dialogFormVisible=t},opened:e.handleOpen}},[a("div",{staticClass:"leaveMsg"},[a("span",{directives:[{name:"show",rawName:"v-show",value:null!=e.formData.title,expression:"formData.title !=null"}]},[e._v("标题："+e._s(e.formData.title))]),e._v(" "),null!=e.formData.type?a("span",[e._v("类型："+e._s(e.showType))]):e._e(),e._v(" "),null!=e.formData.code&&"9"!=e.formData.type?a("span",[e._v("名称：\n                    "),a("span",{class:{active:null!=e.formData.url},on:{click:e.routerUrl}},[e._v("\n                         "+e._s(e.formData.name)+"\n                    ")])]):e._e(),e._v(" "),null!=e.formData.phone?a("span",[e._v("电话："+e._s(e.formData.phone))]):e._e(),e._v(" "),null!=e.formData.email?a("span",[e._v("邮箱："+e._s(e.formData.email))]):e._e(),e._v(" "),null!=e.formData.content?a("span",[e._v("详情："),a("p",{domProps:{innerHTML:e._s(e.formData.content)}})]):e._e(),e._v(" "),1!=e.formData.state?a("el-button",{staticStyle:{float:"right",margin:"15px"},attrs:{type:"success"},on:{click:e.resolved}},[e._v("已解决")]):e._e()],1)])],1)],1)},staticRenderFns:[]};var c=a("C7Lr")(l,p,!1,function(e){a("Nb2t")},"data-v-7203fb38",null);t.default=c.exports},qeYQ:function(e,t,a){"use strict";var r=a("aA9S"),o=a.n(r),i=a("SdNV"),s=a("UV6F"),n=a("Fdse"),l=a("/b2t"),p={props:{rules:{type:Object,default:function(){}},formData:{type:Object,default:function(){}},formOptions:{type:Object,default:function(){}},formItems:{type:Array,default:function(){return[]}},formBtnList:{type:Array,default:function(){return[]}},handleType:String,handleCancleBtn:String},data:function(){return{defaultOptions:{labelPosition:"left",labelWidth:"80px",size:"medium",disabled:!1,hideRequiredAsterisk:!1}}},components:{deptGroup:i.a,regionGroup:s.a,uploadfile:n.a,Editor:l.a},methods:{Sumbit:function(e,t,a){this.$emit("successUpload",e,t,a)},editData:function(e){},handleCofirm:function(){this.$refs.deptCarser&&this.$refs.deptCarser[0].getSelected(),this.$refs.regionCarser&&this.$refs.regionCarser[0].getSelected(),this.$emit("handleCofirm",this.formData)},handleCancle:function(){this.$refs.formData.resetFields(),this.$refs.deptCarser&&this.$refs.deptCarser[0].resetSelect(),this.$refs.regionCarser&&this.$refs.regionCarser[0].resetSelect(),this.$refs.editorPage&&this.$refs.editorPage[0].resetEditor(),this.clearValidateForm(),this.$emit("handleCancle")},initSelect:function(){this.$refs.deptCarser&&this.$refs.deptCarser[0].init(),this.$refs.regionCarser&&this.$refs.regionCarser[0].init()},handleClick:function(e){this.$refs.deptCarser&&this.$refs.deptCarser[0].getSelected(),this.$refs.regionCarser&&this.$refs.regionCarser[0].getSelected(),"function"==typeof this[e]?this[e]():this.$emit(e)},resetForm:function(e){e?this.$refs.formData.resetFields(e):this.$refs.formData.resetFields()},clearValidateForm:function(){this.$refs.formData.clearValidate()},validateForm:function(){var e=this,t=!1;return this.$refs.formData.validate(function(a,r){a?t=!0:(e.$message({type:"error",message:"表单验证失败"}),t=!1)}),t},resetDeptCarser:function(){this.$refs.deptCarser&&this.$refs.deptCarser[0].resetSelect(),this.$refs.regionCarser&&this.$refs.regionCarser[0].resetSelect()}},created:function(){this.$parent.$parent.formOptions?this.$parent.$parent.formOptions=o()({labelPosition:"right",labelWidth:"80px",size:"medium",disabled:!1,hideRequiredAsterisk:!1},this.formOptions):this.$parent.formOptions=o()({labelPosition:"right",labelWidth:"80px",size:"medium",disabled:!1,hideRequiredAsterisk:!1},this.formOptions)}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"form-model"},[a("el-form",e._b({ref:"formData",attrs:{model:e.formData,"validate-on-rule-change":!1}},"el-form",e.formOptions,!1),[e._l(e.formItems,function(t){return[void 0==t.show||t.show?a("el-form-item",{key:t.prop,attrs:{prop:t.prop,rules:t.rules,label:t.label}},["selectgroup"==t.type?a("deptGroup",{ref:"deptCarser",refInFor:!0,model:{value:e.formData[t.prop],callback:function(a){e.$set(e.formData,t.prop,a)},expression:"formData[item.prop]"}}):"editor"==t.type?a("Editor",{ref:"editorPage",refInFor:!0,attrs:{operation:"File_Result_Owner_Ent_Path",defaultValue:t.defaultValue,apiUrl:t.apiUrl},on:{editData:function(a){return e.editData(t)}},model:{value:e.formData[t.prop],callback:function(a){e.$set(e.formData,t.prop,a)},expression:"formData[item.prop]"}}):"selectregion"==t.type?a("regionGroup",{ref:"regionCarser",refInFor:!0,model:{value:e.formData[t.prop],callback:function(a){e.$set(e.formData,t.prop,a)},expression:"formData[item.prop]"}}):"upload"==t.type?a("uploadfile",{ref:"uploadfile",refInFor:!0,attrs:{listType:t.listType,flag:t.state,acceptType:t.acceptType,fileList:t.fileList,icon:t.icon},on:{Sumbit:e.Sumbit},model:{value:e.formData[t.prop],callback:function(a){e.$set(e.formData,t.prop,a)},expression:"formData[item.prop]"}}):"onlytime"==t.type?a("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间"},model:{value:e.formData[t.prop],callback:function(a){e.$set(e.formData,t.prop,a)},expression:"formData[item.prop]"}}):"multipletime"==t.type?a("el-date-picker",{attrs:{type:"datetimerange","value-format":"yyyy-MM-dd HH:mm:ss","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.formData[t.prop],callback:function(a){e.$set(e.formData,t.prop,a)},expression:"formData[item.prop]"}}):a("el-"+t.type,e._b({tag:"component",attrs:{"trigger-on-focus":!1},on:{change:function(e){t.change&&t.change(e)}},model:{value:e.formData[t.prop],callback:function(a){e.$set(e.formData,t.prop,a)},expression:"formData[item.prop]"}},"component",t.eleProps||{},!1),["select"==t.type?e._l(t.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}):e._e(),e._v(" "),"radio-group"==t.type?e._l(t.options,function(t){return a("el-radio",{key:t.value,attrs:{label:t.label}},[e._v(e._s(t.value))])}):e._e(),e._v(" "),"checkbox-group"==t.type?e._l(t.options,function(t){return a("el-checkbox",{key:t.value,attrs:{label:t.label}},[e._v(e._s(t.value))])}):e._e()],2)],1):e._e()]})],2),e._v(" "),a("div",{staticClass:"dialog-footer text-right"},[e.formBtnList.length&&e.formBtnList.length>0?e._l(e.formBtnList,function(t,r){return a("el-button",{key:r,attrs:{type:t.type,size:t.size||"small",icon:t.icon,disabled:t.disabled,plain:t.plain},on:{click:function(a){return e.handleClick(t.method)}}},[e._v(e._s(t.label))])}):[a("el-button",{on:{click:e.handleCancle}},[e._v(e._s(e.handleCancleBtn?e.handleCancleBtn:"取消"))]),e._v(" "),a("el-button",{attrs:{type:"success"},on:{click:e.handleCofirm}},[e._v(e._s("new"==e.handleType?"添 加":"edit"==e.handleType?"修改":e.handleType))])]],2)],1)},staticRenderFns:[]};var f=a("C7Lr")(p,c,!1,function(e){a("/noD")},"data-v-1dccdf0e",null);t.a=f.exports}});