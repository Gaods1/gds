webpackJsonp([6],{EZWe:function(e,t){},RAIY:function(e,t,o){"use strict";var n=o("aA9S"),i=o.n(n),a=o("SdNV"),l={props:{list:{type:Array,default:function(){return[]}},columns:{type:Array,default:function(){return[]}},operates:{type:Object,default:function(){}},pagination:{type:Object,default:{}},getList:Function,options:{type:Object,default:{}},tempCb:{type:Array,default:function(){return[]}},oldRow:{type:Array,default:function(){return[]}}},components:{expandDom:{functional:!0,props:{row:Object,render:Function,index:Number,column:{type:Object,default:null}},render:function(e,t){var o={row:t.props.row,index:t.props.index};return t.props.column&&(o.column=t.props.column),t.props.render(e,o)}}},data:function(){return{multipleSelection:[],radio:"",selected:{}}},created:function(){!1!==this.options.initTable&&this.getList(),this.$parent.options=i()({maxHeight:500,initTable:!0,stripe:!0,loading:!1,highlightCurrentRow:!0,mutiSelect:!1,border:!0},this.options)},mounted:function(){this.radio="",this.selected={}},methods:{handleSizeChange:function(e){this.pagination.pageSize=e,this.$emit("handleSizeChange",this.pagination)},handleIndexChange:function(e){this.pagination.pageIndex=e,this.$emit("handleIndexChange",this.pagination),this.radio="",this.$emit("handleRowClick","",this.radio)},handleSelectionChange:function(e){this.multipleSelection=e,this.$emit("handleSelectionChange",this.multipleSelection)},handleRowClick:function(e,t,o){this.radio=this.list.indexOf(e),this.selected=e,this.$emit("handleRowClick",e,this.radio)},handleSelect:function(e,t){}},watch:{list:function(e){console.info("list : "+e),console.info(this.oldRow),this.radio=""},tempCb:function(e,t){var o=this;console.info("tempCb--\x3e1"),console.info(t),console.info(e),e.length>=t.length?console.info("tempCb添加时不监控"):(console.info("tempCb删除时监控"),this.options.canPostEvent=!1,this.$refs.mutipleTable.clearSelection(),e.forEach(function(e){o.$refs.mutipleTable.toggleRowSelection(e,!0)}),this.$nextTick(function(){this.options.canPostEvent=!0})),console.info("tempCb--\x3e2")}}},r={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"op-table"},[o("div",{staticClass:"table-wrap"},[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.options.loading,expression:"options.loading"}],ref:"mutipleTable",attrs:{data:e.list,"max-height":e.options.maxHeight,stripe:e.options.stripe,"highlight-current-row":"","header-cell-class-name":"table-header",border:e.options.border},on:{"selection-change":e.handleSelectionChange,"row-click":e.handleRowClick,select:e.handleSelect}},[e.options.mutiSelect?o("el-table-column",{staticStyle:{width:"50px"},attrs:{type:"selection"}}):e._e(),e._v(" "),e.options.singleSelect?o("el-table-column",{attrs:{label:"选择",width:"50",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-radio",{attrs:{label:t.$index},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v(" ")])]}}],null,!1,561508731)}):e._e(),e._v(" "),e.options.index?o("el-table-column",{attrs:{label:"序号",type:"index",width:"50",align:"center"}}):e._e(),e._v(" "),e._l(e.columns,function(t,n){return[o("el-table-column",{key:n,attrs:{prop:t.prop,label:t.label,align:t.align||"center",width:t.width,fixed:t.fixed,sortable:t.sortable},scopedSlots:e._u([{key:"default",fn:function(i){return[t.render?[o("expand-dom",{attrs:{column:t,row:i.row,render:t.render,index:n}})]:[t.formatter?[o("span",{domProps:{innerHTML:e._s(t.formatter(i.row,t))}})]:[o("span",[e._v(e._s(i.row[t.prop]))])]]]}}],null,!0)})]}),e._v(" "),e.operates?o("el-table-column",{ref:"fixedColumn",attrs:{label:"操作",align:"center",width:e.operates.width,fixed:e.operates.fixed},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",{staticClass:"operate-group"},[e._l(e.operates.list,function(n,i){return[("function"==typeof n.show?n.show(t.$index,t.row):n.show)?o("el-button",{attrs:{type:n.type,size:"mini",icon:n.icon,disabled:n.disabled,plain:n.plain},nativeOn:{click:function(e){return e.preventDefault(),n.method(t.row,t.$index,i)}}},[e._v(e._s(n.label))]):e._e()]})],2)]}}],null,!1,3124777626)}):e._e()],2)],1),e._v(" "),e.pagination.show?o("el-pagination",{staticStyle:{"margin-top":"20px","text-align":"right"},attrs:{"page-size":e.pagination.pageSize,"page-sizes":e.pagination.pageSizeArr&&e.pagination.pageSizeArr.length>0?e.pagination.pageSizeArr:[10,50,100,500,5e3],"current-page":e.pagination.pageIndex,layout:"total,sizes, prev, pager, next,jumper",total:e.pagination.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleIndexChange}}):e._e()],1)},staticRenderFns:[]};var s=o("C7Lr")(l,r,!1,function(e){o("qOHN")},"data-v-e1ffc592",null).exports,c=o("M/4X"),m=o("kiIx"),f=o("/b2t"),p={props:{rules:{type:Object,default:function(){}},formData:{type:Object,default:function(){}},formOptions:{type:Object,default:function(){}},formLoading:Boolean,formItems:{type:Array,default:function(){return[]}},formBtnList:{type:Array,default:function(){return[]}},handleType:String,handleCancleBtn:String},data:function(){return{defaultOptions:{labelPosition:"left",labelWidth:"80px",size:"medium",disabled:!1,hideRequiredAsterisk:!1},currentIndex:-1}},components:{FileItem:c.a,deptGroup:a.a,opTable:s,uploadAttach:m.a,Editor:f.a},methods:{Sumbit:function(e,t,o){this.$emit("successUpload",e,t,o)},initClick:function(e){this.currentIndex=e,console.info("this.currentIndex = "+this.currentIndex),this.handleSearch()},editData:function(e){},handleCofirm:function(){this.$refs.deptCarser&&this.$refs.deptCarser[0].getSelected(),this.$emit("handleCofirm",this.formData)},handleCancle:function(){this.$refs.formData.resetFields(),this.$refs.deptCarser&&this.$refs.deptCarser[0].resetSelect(),this.$emit("handleCancle")},initSelect:function(){this.$refs.deptCarser[0].init()},handleClick:function(e){this.$refs.deptCarser&&this.$refs.deptCarser[0].getSelected(),"function"==typeof this[e]?this[e]():this.$emit(e)},resetForm:function(e){console.log(this.$refs.formData),e?this.$refs.formData.resetFields(e):this.$refs.formData.resetFields()},clearValidateForm:function(){this.$refs.formData.clearValidate()},validateForm:function(){var e=this,t=!1;return this.$refs.formData.validate(function(o,n){o?t=!0:(e.$message({type:"error",message:"表单验证失败"}),t=!1)}),t},validateField:function(e){this.$refs.formData.validateField(e)},resetDeptCarser:function(){this.$refs.deptCarser[0].resetSelect()},validateFormField:function(e){this.$refs.formData.validateField(e)},handleList:function(e){var t=this.currentIndex;(0,this.formItems[t].handleList)(t,e)},handleSizeChange:function(e){var t=this.currentIndex;this.formItems[t].pagination=e,console.log("handleSizeChange:"+this.formItems[t].pagination.pageSize),this.handleList(this.formItems[t].pagination)},handleIndexChange:function(e){var t=this.currentIndex;this.formItems[t].pagination=e,console.log("handleIndexChange:"+this.formItems[t].pagination.pageIndex),console.log("handleIndexChange:"+this.formItems[t].pagination.pageSize),this.handleList(this.formItems[t].pagination)},handleSelectionChange:function(e){console.log("当前页面选中的所有行val:",e);var t=this.currentIndex;if(this.formItems[t].selectRow=e,this.formItems[t].options.mutiSelect)if(this.formItems[t].list&&this.formItems[t].list.length>0){var o=this.formItems[t].handleSelectionChange;console.info("canPostEvent = "+this.formItems[t].options.canPostEvent),this.formItems[t].options.canPostEvent&&o(t,e)}else console.log("当前页面已经没有数据了，不再回调")},handleRowClick:function(e,t,o){var n=this.currentIndex;console.info("handleRowClick-----------------\x3e"),e&&(console.info("row = "+e),console.info("itemIndex="+n),this.formItems[n].options.singleSelect&&(this.formItems[n].selectRow=e))},handleRowOkClick:function(e){var t=this.currentIndex,o=this.formItems[t].method,n=void 0;n=this.formItems[t].options.singleSelect?this.formItems[t].selectRow:this.formItems[t].tempKV,console.info("handleRowOkClick-----------------\x3eOK"),console.info(n),console.info("itemIndex="+t),""==n||n.length<=0?this.$message({type:"warning",message:"请选择一行数据"}):(o(n,t),this.$refs.formData.validateField(this.formItems[t].prop))},handleRowCancelClick:function(){var e=this.currentIndex;this.formItems[e].selectRow="",this.formItems[e].searchText="",this.formItems[e].total=0,this.formItems[e].list=[],this.formItems[e].pagination.pageIndex=1,this.formItems[e].pagination.total=0,this.formItems[e].visible=!1},handleSearch:function(){var e=this.currentIndex,t=this.formItems[e].handleSearch;t(e)},itemChange:function(e){alert(e)}},created:function(){this.$parent.$parent.formOptions?this.$parent.$parent.formOptions=i()({labelPosition:"right",labelWidth:"80px",size:"medium",disabled:!1,hideRequiredAsterisk:!1},this.formOptions):this.$parent.formOptions=i()({labelPosition:"right",labelWidth:"80px",size:"medium",disabled:!1,hideRequiredAsterisk:!1},this.formOptions)},computed:{getOptionLabels:{get:function(){var e=[],t=this.currentIndex;if(console.info("get----getOptionLabels...itemIndex = "+t),t>-1&&this.formItems[t].options.mutiSelect){var o=this.formItems[t].tempKV;console.info(o);for(var n=0;n<o.length;n++){var i=o[n].serial+"."+o[n].label;e.push(i)}}return e},set:function(e){var t=this.currentIndex;console.info("set----getOptionLabels...itemIndex = "+t),console.info(e),console.info("更新 tempKV");for(var o=this.formItems[t].tempKV,n=this.formItems[t].oldRow,i=0;i<o.length;i++){for(var a=-1,l=0;l<e.length;l++){if(o[i].serial+"."+o[i].label==e[l]){a=l;break}}if(-1==a){o.splice(i,1),n.splice(i,1);break}}console.info(o),this.formItems[t].tempKV=o,this.formItems[t].oldRow=n}},dataModel:function(){for(var e in this.formData)this.$set(this.formData,e,this.formData[e]);return this.formData}},watch:{getOptionLabels:function(e,t){console.info("watch--getOptionLabels--\x3estart"),console.info(t),console.info(e);var o=this.currentIndex;this.formItems[o].options.mutiSelect&&(0,this.formItems[o].changeCb)(o,e);console.info("watch--getOptionLabels--\x3eend")}}},d={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"form-model"},[o("el-form",e._b({directives:[{name:"loading",rawName:"v-loading",value:e.formLoading,expression:"formLoading"}],ref:"formData",attrs:{model:e.formData,rules:e.rules}},"el-form",e.formOptions,!1),e._l(e.formItems,function(t,n){return void 0==t.show||t.show?o("el-form-item",{key:t.prop,attrs:{prop:t.prop,rules:t.rules,label:t.label}},["selectgroup"==t.type?o("deptGroup",{ref:"deptCarser",refInFor:!0,model:{value:e.formData[t.prop],callback:function(o){e.$set(e.formData,t.prop,o)},expression:"formData[item.prop]"}}):"editor"==t.type?o("Editor",{ref:"editorPage",refInFor:!0,attrs:{imageShow:t.imageShow,operation:"File_Result_Owner_Ent_Path",defaultValue:t.defaultValue,apiUrl:t.apiUrl},on:{editData:e.editData},model:{value:e.dataModel[t.prop],callback:function(o){e.$set(e.dataModel,t.prop,o)},expression:"dataModel[item.prop]"}}):"upload"==t.type?o("uploadAttach",{ref:"uploadfile",refInFor:!0,attrs:{flag:t.state,icon:t.icon,limitNum:t.limitNum,uploadTips:t.uploadTxt||"",uploadBtnTxt:t.uploadBtnTxt||"",listType:t.listType,acceptType:t.acceptType,defaultList:t.defaultList},on:{validateFormField:e.validateFormField},model:{value:e.dataModel[t.prop],callback:function(o){e.$set(e.dataModel,t.prop,o)},expression:"dataModel[item.prop]"}}):"popover"==t.type?o("el-popover",{attrs:{placement:"right","visible-arrow":"false",width:"600",trigger:"click"},model:{value:t.visible,callback:function(o){e.$set(t,"visible",o)},expression:"item.visible"}},[[o("div",{staticStyle:{"margin-top":"15px","margin-bottom":"15px"}},[o("el-input",{staticClass:"input-with-select",staticStyle:{width:"460px"},attrs:{placeholder:"请输入搜索内容"},model:{value:t.searchText,callback:function(o){e.$set(t,"searchText",o)},expression:"item.searchText"}},[o("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.handleSearch},slot:"append"})],1),e._v(" "),o("el-button",{attrs:{size:"small"},on:{click:e.handleRowCancelClick}},[e._v("取消")]),e._v(" "),o("el-button",{attrs:{size:"small",type:"success"},on:{click:e.handleRowOkClick}},[e._v("确定")]),e._v(" "),o("div",[t.options.mutiSelect&&t.visible?o("el-select",{staticStyle:{width:"100%","margin-top":"5px"},attrs:{multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"已经选中的信息"},model:{value:e.getOptionLabels,callback:function(t){e.getOptionLabels=t},expression:"getOptionLabels"}}):e._e()],1)],1),e._v(" "),o("opTable",{attrs:{list:t.list,total:t.total,options:t.options,pagination:t.pagination,columns:t.columns,operates:t.operates,getList:e.handleList,tempCb:t.tempCb,oldRow:t.oldRow},on:{handleSizeChange:e.handleSizeChange,handleIndexChange:e.handleIndexChange,handleSelectionChange:e.handleSelectionChange,handleRowClick:e.handleRowClick}}),e._v(" "),[o("div",{staticStyle:{float:"right","margin-top":"15px"}})]],e._v(" "),o("el-input",e._b({attrs:{slot:"reference","suffix-icon":"el-icon-edit","trigger-on-focus":!1},on:{focus:function(t){return e.initClick(n)}},slot:"reference",model:{value:t.options.mutiSelect?t.defaultLabel.toString():t.defaultLabel,callback:function(o){e.$set(t.options.mutiSelect?t.defaultLabel.toString():t,"defaultLabel",o)},expression:"item.options.mutiSelect?item.defaultLabel.toString():item.defaultLabel"}},"el-input",t.eleProps||{},!1))],2):o("el-"+t.type,e._b({directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"item.loading"}],tag:"component",style:t.style?t.style:"",attrs:{"trigger-on-focus":!1},on:{change:function(e){t.change&&t.change(e)}},model:{value:e.formData[t.prop],callback:function(o){e.$set(e.formData,t.prop,o)},expression:"formData[item.prop]"}},"component",t.eleProps||{},!1),[e._l(t.options,function(n){return"select"==t.type&&t.group?o("el-option-group",{key:n.label,attrs:{label:n.label}},e._l(n.options,function(n){return"select"==t.type?o("el-option",{key:n.value,attrs:{label:n.label,value:n.value}}):e._e()}),1):e._e()}),e._v(" "),e._l(t.options,function(n){return"select"!=t.type||t.group?e._e():o("el-option",{key:n.value,attrs:{label:n.label,value:n.value}})}),e._v(" "),e._l(t.options,function(n){return"radio-group"==t.type?o("el-radio",{key:n.value,attrs:{label:n.label}},[e._v("\n                    "+e._s(n.value)+"\n                ")]):e._e()}),e._v(" "),e._l(t.options,function(n){return"checkbox-group"==t.type?o("el-checkbox",{key:n.value,attrs:{label:n.label}},[e._v(e._s(n.value)+"\n                ")]):e._e()})],2)],1):e._e()}),1),e._v(" "),o("div",{staticClass:"dialog-footer text-right"},[e.formBtnList.length&&e.formBtnList.length>0?e._l(e.formBtnList,function(t,n){return o("el-button",{key:n,attrs:{type:t.type,size:t.size||"small",icon:t.icon,disabled:t.disabled,plain:t.plain},on:{click:function(o){return e.handleClick(t.method)}}},[e._v(e._s(t.label)+"\n            ")])}):[o("el-button",{on:{click:e.handleCancle}},[e._v(e._s(e.handleCancleBtn?e.handleCancleBtn:"取消"))]),e._v(" "),o("el-button",{attrs:{type:"success"},on:{click:e.handleCofirm}},[e._v(e._s("new"==e.handleType?"添 加":"edit"==e.handleType?"修改":e.handleType)+"\n            ")])]],2)],1)},staticRenderFns:[]};var h=o("C7Lr")(p,d,!1,function(e){o("pt5p")},"data-v-f2f35116",null);t.a=h.exports},esnN:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o("D4TX"),i=o("GOyC"),a=o("R5Jg"),l=o("RAIY"),r=o("pxwZ"),s="/project/project_match_info/",c={data:function(){var e=this;return{searchplaceholder:"请输入项目名称",dialogTitle:"",dialogFormVisible:!1,serial:"",rules:{cmsg:[{required:!0,message:"请输入审核意见",trigger:"blur"}]},currentEditLine:0,select_word:"",formData:{},handleType:"new",formOptions:{labelWidth:"120px"},formLoading:!1,formItems:[{prop:"rm_title",text:"项目名称",label:"项目名称",type:"input",eleProps:{placeholder:"请输入项目名称",readonly:!1}},{prop:"mainbroker",text:"主技术经理人",label:"主技术经理人",type:"popover",eleProps:{placeholder:"请选择项目主技术经理人",readonly:!0},defaultValue:"",defaultLabel:"",oldRow:[],tempKV:[],tempCb:[],selectRow:"",searchText:"",visible:!1,pagination:{pageIndex:1,pageSize:5,pageSizeArr:[5,10,50,100,500,5e3],show:!0,total:0},options:{index:!0,stripe:!0,loading:!1,highlightCurrentRow:!0,singleSelect:!0,mutiSelect:!1,initTable:!1,canPostEvent:!0},total:0,list:[],columns:[{prop:"broker_name",label:"姓名",align:"center",width:250},{prop:"broker_mobile",label:"电话",align:"center",width:250}],method:function(t,o){if(console.info("method------------------\x3e"),console.info(t),console.info(o),console.info(e.formItems[o].options.singleSelect),e.formItems[o].options.singleSelect)e.formItems[o].defaultValue=t.broker_code,e.formItems[o].defaultLabel=t.broker_name,e.$set(e.formData,e.formItems[o].prop,t.broker_code),e.formItems[o].visible=!1,console.info(e.formData);else{for(var n=[],i=[],a=e.formItems[o].tempKV,l=0;l<a.length;l++){var r=a[l];n.push(r.value),i.push(r.label)}e.formItems[o].defaultValue=n,e.formItems[o].defaultLabel=i,e.$set(e.formData,e.formItems[o].prop,n),e.formItems[o].visible=!1,console.info(e.formData)}e.formItems[o].selectRow="",e.formItems[o].searchText="",e.formItems[o].total=0,e.formItems[o].list=[],e.formItems[o].pagination.pageIndex=1,e.formItems[o].pagination.total=0},handleSearch:function(t){e.formItems[t].total=0,e.formItems[t].list=[],e.formItems[t].pagination.pageIndex=1,e.formItems[t].pagination.total=0,e.handleList(t)},handleList:function(t,o){console.info("handleList.pagination",o),e.formItems[t].pagination.pageIndex=o.pageIndex,e.formItems[t].pagination.pageSize=o.pageSize,e.handleList(t)},handleSelectionChange:function(t,o){console.info("handleSelectionChange----\x3e当前页"),console.info(t),console.info(o);for(var n=e.formItems[t].tempKV,i=e.formItems[t].oldRow,a=e.formItems[t].list,l=0;l<a.length;l++){for(var r=-1,s=0;s<o.length;s++)if(a[l].broker_code==o[s].broker_code){r=s;break}if(-1==r)for(var c=n.length,m=0;m<c;m++)if(n[m].value==a[l].broker_code){n.splice(m,1),i.splice(m,1);break}}for(var f=0;f<o.length;f++){for(var p=-1,d=0;d<n.length;d++)if(n[d].value==o[f].broker_code){p=d;break}-1==p&&(n.push({serial:o[f].serial,label:o[f].broker_name,value:o[f].broker_code}),i.push(o[f]))}console.info("handleSelectionChange-tempKV>"+n),console.info("handleSelectionChange-oldRow>"+i),e.formItems[t].tempKV=n,e.formItems[t].oldRow=i},changeCb:function(t,o){console.info("changeCb----\x3e"),console.info(t),console.info(o);for(var n=e.formItems[t].list,i=[],a=0;a<n.length;a++)for(var l=0;l<o.length;l++){n[a].serial+"."+n[a].broker_name==o[l]&&i.push(n[a])}e.formItems[t].tempCb=i}},{prop:"brokers",text:"其他技术经理人",label:"其他技术经理人",type:"popover",eleProps:{placeholder:"请选择项目其他技术经理人",readonly:!0},defaultValue:"",defaultLabel:"",oldRow:[],tempKV:[],tempCb:[],selectRow:"",searchText:"",visible:!1,pagination:{pageIndex:1,pageSize:5,pageSizeArr:[5,10,50,100,500,5e3],show:!0,total:0},options:{index:!0,stripe:!0,loading:!1,highlightCurrentRow:!0,singleSelect:!1,mutiSelect:!0,initTable:!1,canPostEvent:!0},total:0,list:[],columns:[{prop:"broker_name",label:"姓名",align:"center",width:250},{prop:"broker_mobile",label:"电话",align:"center",width:250}],method:function(t,o){if(console.info("method------------------\x3e"),console.info(t),console.info(o),console.info(e.formItems[o].options.singleSelect),e.formItems[o].options.singleSelect)e.formItems[o].defaultValue=t.broker_code,e.formItems[o].defaultLabel=t.broker_name,e.$set(e.formData,e.formItems[o].prop,t.broker_code),e.formItems[o].visible=!1,console.info(e.formData);else{for(var n=[],i=[],a=e.formItems[o].tempKV,l=0;l<a.length;l++){var r=a[l];n.push(r.value),i.push(r.label)}e.formItems[o].defaultValue=n,e.formItems[o].defaultLabel=i,e.$set(e.formData,e.formItems[o].prop,n),e.formItems[o].visible=!1,console.info(e.formData)}e.formItems[o].selectRow="",e.formItems[o].searchText="",e.formItems[o].total=0,e.formItems[o].list=[],e.formItems[o].pagination.pageIndex=1,e.formItems[o].pagination.total=0},handleSearch:function(t){e.formItems[t].total=0,e.formItems[t].list=[],e.formItems[t].pagination.pageIndex=1,e.formItems[t].pagination.total=0,e.handleList(t)},handleList:function(t,o){console.info("handleList.pagination",o),e.formItems[t].pagination.pageIndex=o.pageIndex,e.formItems[t].pagination.pageSize=o.pageSize,e.handleList(t)},handleSelectionChange:function(t,o){console.info("handleSelectionChange----\x3e当前页"),console.info(t),console.info(o);for(var n=e.formItems[t].tempKV,i=e.formItems[t].oldRow,a=e.formItems[t].list,l=0;l<a.length;l++){for(var r=-1,s=0;s<o.length;s++)if(a[l].broker_code==o[s].broker_code){r=s;break}if(-1==r)for(var c=n.length,m=0;m<c;m++)if(n[m].value==a[l].broker_code){n.splice(m,1),i.splice(m,1);break}}for(var f=0;f<o.length;f++){for(var p=-1,d=0;d<n.length;d++)if(n[d].value==o[f].broker_code){p=d;break}-1==p&&(n.push({serial:o[f].serial,label:o[f].broker_name,value:o[f].broker_code}),i.push(o[f]))}console.info("handleSelectionChange-tempKV>"+n),console.info("handleSelectionChange-oldRow>"+i),e.formItems[t].tempKV=n,e.formItems[t].oldRow=i},changeCb:function(t,o){console.info("changeCb----\x3e"),console.info(t),console.info(o);for(var n=e.formItems[t].list,i=[],a=0;a<n.length;a++)for(var l=0;l<o.length;l++){n[a].serial+"."+n[a].broker_name==o[l]&&i.push(n[a])}e.formItems[t].tempCb=i}},{prop:"rm_object_type",label:"主体类型",type:"select",eleProps:{},show:!0,change:function(e){},options:[{value:1,label:"技术经理人"},{value:2,label:"企业成果持有人"},{value:3,label:"个人成果持有人"},{value:4,label:"个人需求者"},{value:5,label:"企业需求者"},{value:6,label:"技术团队"},{value:7,label:"领域专家"},{value:8,label:"采集员"}]},{prop:"rm_type",label:"申请类型",type:"select",eleProps:{},show:!0,change:function(e){},options:[{value:1,label:"申请人已经匹配，申请转化"},{value:2,label:"通过成果进行申请"},{value:3,label:"通过需求进行申请"}]},{prop:"rm_abstract",text:"申请描述",label:"申请描述",type:"input",eleProps:{placeholder:"申请描述",type:"textarea",rows:6},rules:[{message:"请填写申请描述",trigger:"blur"}]},{prop:"rm_body",text:"申请详情",label:"申请详情",type:"editor",$default:null,defaultValue:"",imageShow:!0,apiUrl:"",eleProps:{maxlength:65535},rules:[{message:"请填写申请详情",trigger:"change"}]}],handleConfig:{searchTerms:[{value:"rm_title",label:"项目名称"}],newItemTxt:!1,delBtn:!1},total:0,list:[],columns:[{prop:"rm_title",label:"项目名称",align:"center",width:350},{prop:"rm_state",label:"状态",align:"center",width:180,render:function(t,o){return t("el-tag",{props:{type:1===o.row.rm_state?"":2===o.row.rm_state?"success":3===o.row.rm_state?"danger":4===o.row.rm_state?"warning":"info"}},e.formatRmState(o.row.rm_state))}},{prop:"rm_type",label:"申请类型",align:"center",width:180,formatter:function(t,o,n){return e.formatRmType(t.rm_type)}},{prop:"rm_time",label:"申请时间",align:"center",width:180},{prop:"insert_time",label:"创建时间",align:"center",width:180}],operates:{width:280,fixed:"right",list:[{label:"编辑",type:"warning",show:function(e,t){return!0},icon:"el-icon-edit",plain:!0,disabled:!1,method:function(t,o){e.handleEdit(t,o)}},{label:"删除",type:"danger",icon:"el-icon-delete",show:!0,plain:!1,disabled:!1,method:function(t,o){e.handleDel(t,o)}},{label:"详情",type:"primary",show:function(e,t){return!0},icon:"el-icon-info",plain:!0,disabled:!1,method:function(t,o){e.handleDetail(t,o)}}]},pagination:{pageIndex:1,pageSize:10,show:!0,total:0},options:{index:!0,stripe:!0,loading:!1,highlightCurrentRow:!0,mutiSelect:!1}}},components:{jsonForm:l.a,curmbs:n.a,handleBox:i.a,opTable:a.a},mounted:function(){},methods:{formatRmType:function(e){var t="不详";switch(e){case 1:t="申请人已经匹配";break;case 2:t="通过成果进行申请";break;case 3:t="通过需求进行申请"}return t},formatRmState:function(e){var t="不详";switch(e){case 0:t="草稿箱";break;case 1:t="提交待审核";break;case 2:t="审核通过";break;case 3:t="审核不通过";break;case 4:t="申请者放弃"}return t},handleClose:function(e){this.$refs.formDialog.$children[0].$refs.formData.clearValidate(),e()},handleCofirm:function(e){var t,o,n=this;if(console.info("handleCofirm-----------\x3e"),console.log(e),!this.$refs.formData.validateForm())return!1;this.formLoading=!0,"new"==this.handleType||"edit"==this.handleType&&(t=this.serial,o=e,Object(r.c)(s+t+"/",o)).then(function(e){n.formLoading=!1,n.list.splice(n.currentEditLine,1,e),n.dialogFormVisible=!1,n.$message({type:"success",message:"编辑成功!"})})},newItem:function(){},search:function(e,t){console.log("search:"+e+","+t),this.select_word=t,this.getList()},delAll:function(){},getList:function(){var e,t=this;this.options.loading=!0,(e={params:{page:this.pagination.pageIndex,page_size:this.pagination.pageSize,search:this.select_word}},Object(r.b)(s,e)).then(function(e){e.detail&&t.$message.error(e.detail),console.info(e),t.total=e.count,t.pagination.total=Number(e.count),t.list=e.results,t.options.loading=!1})},handleSizeChange:function(e){this.pagination=e,console.log("handleSizeChange:"+this.pagination.pageSize),this.getList()},handleIndexChange:function(e){this.pagination=e,console.log("handleIndexChange:"+this.pagination.pageIndex),this.getList()},handleSelectionChange:function(e){},handleEdit:function(e,t){var o=this;console.info(e),this.currentEditLine=t,this.dialogTitle="编辑项目信息",this.handleType="edit",this.serial=e.rm_serial,this.formLoading=!0;for(var n=function(t){void 0!==e[o.formItems[t].prop]&&(e[o.formItems[t].prop]?o.$set(o.formData,o.formItems[t].prop,e[o.formItems[t].prop]):o.$set(o.formData,o.formItems[t].prop,null)),"editor"==o.formItems[t].type&&o.$nextTick(function(){o.$set(o.formItems[t],"defaultValue",e[o.formItems[t].prop])})},i=0;i<this.formItems.length;i++)n(i);this.getInitList(e,t),this.formLoading=!1,this.dialogFormVisible=!0,this.$nextTick(function(){o.$refs.formDialog.$children[0].$refs.formData.clearValidate()})},handleDel:function(e,t){var o=this;console.info(e),this.$confirm("此操作将永久删除该项目, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var n;(n=e.rm_serial,Object(r.a)(s+n+"/")).then(function(e){e.detail&&o.$message.error(e.detail),o.list.splice(t,1)}).then(function(){o.$message({type:"success",message:"删除成功!"})})}).catch(function(){})},handleDetail:function(e,t){this.$router.push({name:"project_match_detail",query:{serial:e.rm_serial}})},handleCheck:function(e,t){this.dialogTitle="审核",this.handleType="edit",console.info(e),this.serial=e.rm_serial,this.$set(this.formData,"rm_code",e.rm_code),this.$set(this.formData,"cstate",-1),this.$set(this.formData,"cmsg",""),console.info(this.formData),this.dialogFormVisible=!0},handleIdent:function(){var e,t,o=this;(console.info(this.formData),this.formData.cmsg)?(e=this.serial,t=this.formData,Object(r.c)(s+e+"/",t)).then(function(e){e.detail?o.$message.error(e.detail):1==e.state?(o.$message({type:"success",message:"审核成功!"}),o.dialogFormVisible=!1,o.getList()):o.$message({type:"error",message:e.msg})}):this.$message({type:"error",message:"审核意见不能为空"})},getInitList:function(e,t){for(var o=0;o<this.formItems.length;o++){if("mainbroker"==this.formItems[o].prop){for(var n=void 0,i=void 0,a=e.broker_info,l=0;l<a.length;l++){var r=a[l];if(1==r.leader_tag){n=r.brokerinfo.broker_code,i=r.brokerinfo.broker_name;break}}this.formItems[o].defaultLabel=i,this.formItems[o].defaultValue=n,this.formItems[o].total=0,this.formItems[o].list=[],this.formItems[o].pagination.pageIndex=1,this.formItems[o].pagination.total=0,this.$set(this.formData,this.formItems[o].prop,n)}if("brokers"==this.formItems[o].prop){for(var s=[],c=[],m=[],f=[],p=e.broker_info,d=0;d<p.length;d++){var h=p[d];0==h.leader_tag&&(s.push(h.brokerinfo.broker_code),c.push(h.brokerinfo.broker_name),f.push(h.brokerinfo),m.push({serial:h.brokerinfo.serial,label:h.brokerinfo.broker_name,value:h.brokerinfo.broker_code}))}this.formItems[o].defaultLabel=c,this.formItems[o].defaultValue=s,this.formItems[o].tempKV=m,this.formItems[o].oldRow=f,this.formItems[o].total=0,this.formItems[o].list=[],this.formItems[o].pagination.pageIndex=1,this.formItems[o].pagination.total=0,this.$set(this.formData,this.formItems[o].prop,s)}}},handleList:function(e){var t,o=this;console.info("handleList itemIndex = "+e),this.formItems[e].options.loading=!0,console.info(this.formItems[e].prop),"brokers"!=this.formItems[e].prop&&"mainbroker"!=this.formItems[e].prop||(console.info("handleList....."),(t={params:{page:this.formItems[e].pagination.pageIndex,page_size:this.formItems[e].pagination.pageSize,search:this.formItems[e].searchText}},Object(r.b)("/certified/broker/",t)).then(function(t){t.detail?o.$message.error(t.detail):(o.formItems[e].total=t.count,o.formItems[e].pagination.total=Number(t.count),o.formItems[e].list=t.results,o.formItems[e].options.loading=!1)}))}}},m={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"warp-box"},[o("curmbs"),e._v(" "),o("div",{staticClass:"container"},[o("handleBox",{attrs:{handleConfig:e.handleConfig,searchplaceholder:e.searchplaceholder},on:{delAll:e.delAll,search:e.search,newItem:e.newItem}}),e._v(" "),o("opTable",{attrs:{list:e.list,total:e.total,options:e.options,pagination:e.pagination,columns:e.columns,operates:e.operates,getList:e.getList},on:{handleSizeChange:e.handleSizeChange,handleIndexChange:e.handleIndexChange,handleSelectionChange:e.handleSelectionChange}}),e._v(" "),o("el-dialog",{ref:"formDialog",attrs:{title:e.dialogTitle,visible:e.dialogFormVisible,"before-close":e.handleClose,modal:!1,"lock-scroll":!0},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[o("jsonForm",{ref:"formData",attrs:{handleType:e.handleType,formData:e.formData,rules:e.rules,formItems:e.formItems,formOptions:e.formOptions,formLoading:e.formLoading},on:{handleCancle:function(t){e.dialogFormVisible=!1},handleCofirm:e.handleCofirm}})],1)],1)],1)},staticRenderFns:[]};var f=o("C7Lr")(c,m,!1,function(e){o("EZWe")},"data-v-16cc97a6",null);t.default=f.exports},pt5p:function(e,t){},qOHN:function(e,t){}});