webpackJsonp([62],{DqIV:function(e,t){},FQNb:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("D4TX"),r=a("GOyC"),s=a("R5Jg"),n=a("93JQ"),o=a("9pcb"),l={data:function(){var e=this;return{dialogTitle:"",dialogFormVisible:!1,serial:"",ruleType:1,rules:{password:[{required:!0,message:"请输入密码",trigger:"blur"},{type:"string",pattern:/^[a-zA-Z0-9]{6,32}$/,trigger:["change","blur"],min:6,max:32,message:"密码由6-16位字母、数字、符号组成"}],user_mobile:[{required:!0,message:"请输入手机号码",trigger:["change","blur"]},{pattern:/^1[3-9]\d{9}$/,message:"请正确输入手机号",trigger:["change","blur"]}],user_name:[{required:!0,message:"请输入用户名",trigger:"blur"}],user_email:[{required:!0,type:"email",message:"请输入正确的邮箱地址",trigger:["change","blur"]}],dept_code:[{required:!0,message:"请选择部门",trigger:["change","blur"]}]},rules2:{account:[{required:!0,message:"请输入账号",trigger:"blur"},{type:"string",pattern:/^[a-zA-Z]\w{5,32}$/,min:6,max:32,message:"字母开头，字母和数字下划线组合的6-32位字符串",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:["change","blur"]},{type:"string",pattern:/^[a-zA-Z0-9]{6,32}$/,trigger:["change","blur"],min:6,max:32,message:"密码由6-16位字母、数字、符号组成"}],dept_code:[{required:!0,message:"请选择部门",trigger:["change","blur"]}]},rules3:{account:[{type:"string",pattern:/^[a-zA-Z]\w{5,32}$/,min:6,max:32,message:"字母开头，字母和数字下划线组合的6-32位字符串",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:["change","blur"]},{type:"string",pattern:/^[a-zA-Z0-9]{6,32}$/,trigger:["change","blur"],min:6,max:32,message:"密码由6-16位字母、数字、符号组成"}],dept_code:[{required:!0,message:"请选择部门",trigger:["change","blur"]}]},currentEditLine:0,select_word:"",formData:{},handleType:"new",formOptions:{},formItems:[{prop:"account_type",label:"帐号类型",type:"select",eleProps:{},show:!0,change:function(t){e.ruleType=t,e.$refs.formData.clearValidateForm(),e.formItems[1].eleProps.disabled=1==t,e.formData.account=""},options:[{value:1,label:"发布平台帐号"},{value:2,label:"管理后台帐号"}]},{prop:"account",text:"登录帐号",label:"帐号",type:"input",eleProps:{placeholder:"请输入帐号",disabled:!0}},{prop:"user_mobile",text:"用户电话",label:"手机号码",type:"input",eleProps:{placeholder:"请输入手机号码",maxlength:11}},{prop:"password",text:"登录密码",label:"密码",type:"input",eleProps:{placeholder:"请填写密码",type:"password"}},{prop:"user_name",text:"用户名",label:"用户名",type:"input",eleProps:{placeholder:"请输入用户名"}},{prop:"dept_code",text:"部门",label:"部门",type:"selectgroup"},{prop:"user_email",text:"邮箱",label:"邮箱",type:"input",eleProps:{placeholder:"请输入邮箱"}},{prop:"account_memo",text:"描述",label:"帐号描述",type:"input",eleProps:{placeholder:"帐号描述"}},{prop:"state",text:"状态",label:"帐号状态",type:"switch",eleProps:{"inactive-value":0,"active-value":1,"active-text":"启用","inactive-text":"不启用"}}],handleConfig:{searchTerms:[{value:"1",label:"条件一"},{value:"2",label:"条件二"},{value:"3",label:"条件三"}],newItemTxt:"创建账户",delBtn:!1},total:0,list:[],columns:[{prop:"account",label:"帐号",align:"center",width:180},{prop:"user_name",label:"用户名",align:"center",width:120},{prop:"state",label:"帐号状态",align:"center",width:"160",render:function(e,t){return e("el-tag",{props:{type:0===t.row.state?"danger":1===t.row.state?"success":"info"}},0===t.row.state?"禁用":1===t.row.state?"启用":"审核中")}},{prop:"user_mobile",label:"手机号码",align:"center",width:160},{prop:"user_email",label:"邮箱",align:"center",width:240},{prop:"creater",label:"创建人",align:"center",width:180},{prop:"dept_code",label:"所属部门",align:"center",width:180,formatter:function(e,t,a){return e.dept}},{prop:"active",label:"邮箱状态",align:"center",width:180,render:function(e,t){return e("span",{style:{color:0===t.row.active?"red":"green"}},0===t.row.active?"未激活":"已激活")}},{prop:"insert_time",label:"注册日期",align:"center",width:180,sortable:!0}],operates:{width:200,fixed:"right",list:[{label:"编辑",type:"warning",show:function(e,t){return!0},icon:"el-icon-edit",plain:!0,disabled:!1,method:function(t,a){e.handleEdit(t,a)}},{label:"删除",type:"danger",icon:"el-icon-delete",show:!0,plain:!1,disabled:!1,method:function(t,a){e.handleDel(t,a)}}]},pagination:{pageIndex:1,pageSize:10,show:!0,total:0},options:{stripe:!0,loading:!1,highlightCurrentRow:!0,mutiSelect:!0}}},components:{jsonForm:n.a,curmbs:i.a,handleBox:r.a,opTable:s.a},computed:{rulesList:function(){return"edit"==this.handleType?this.rules3:1==this.ruleType?this.rules:this.rules2}},methods:{open:function(){this.$refs.formData.clearValidateForm()},handleOpen:function(){this.$refs.formData.clearValidateForm(),this.$refs.formData.initSelect()},handleClose:function(e){this.$refs.formData.handleCancle(),e()},handleCofirm:function(e){var t=this;if(!this.$refs.formData.validateForm())return!1;"edit"==this.handleType?Object(o.e)(this.serial,e).then(function(e){if(e.detail)return t.$message.error(e.detail),!1;t.list.splice(t.currentEditLine,1,e),t.$refs.formData.resetDeptCarser(),t.dialogFormVisible=!1,t.$message({type:"success",message:"编辑成功!"})}):Object(o.b)(e).then(function(e){if(e.detail)return t.$message.error(e.detail),!1;t.list.splice(0,0,e),t.$refs.formData.resetDeptCarser(),t.dialogFormVisible=!1,t.$message({type:"success",message:"添加成功!"})})},newItem:function(){for(var e=0;e<this.formItems.length;e++)"switch"==this.formItems[e].type?this.$set(this.formData,this.formItems[e].prop,1):"account_type"==this.formItems[e].prop?(this.$set(this.formItems[0],"show",!0),this.$set(this.formData,this.formItems[e].prop,1)):this.$set(this.formData,this.formItems[e].prop,null),"account"==this.formItems[e].prop&&(this.formItems[e].eleProps.disabled=!0,this.$set(this.formItems[0],"show",!0));this.dialogTitle="新增帐号",this.currentEditLine=0,this.handleType="new",this.dialogFormVisible=!0},search:function(e,t){console.log("search:"+e+","+t),this.select_word=t,this.getList()},delAll:function(){console.log("delAll")},getList:function(){var e=this;this.options.loading=!0,Object(o.g)({params:{page:this.pagination.pageIndex,page_size:this.pagination.pageSize,search:this.select_word}}).then(function(t){e.total=t.data.count,e.pagination.total=Number(t.data.count),e.list=t.data.results,e.options.loading=!1})},handleSizeChange:function(e){this.pagination=e,console.log("handleSizeChange:"+this.pagination.pageSize),this.getList()},handleIndexChange:function(e){this.pagination=e,console.log("handleIndexChange:"+this.pagination.pageIndex),this.getList()},handleSelectionChange:function(e){console.log("val:",e)},handleEdit:function(e,t){this.currentEditLine=t,this.dialogTitle="编辑帐号信息",this.handleType="edit",this.serial=e.serial;for(var a=0;a<this.formItems.length;a++)void 0!==e[this.formItems[a].prop]&&(e[this.formItems[a].prop]?this.$set(this.formData,this.formItems[a].prop,e[this.formItems[a].prop]):this.$set(this.formData,this.formItems[a].prop,null)),"account"==this.formItems[a].prop&&(this.formData.account?this.formItems[a].eleProps.disabled=!0:this.formItems[a].eleProps.disabled=!1,this.$set(this.formItems[0],"show",!1));this.dialogFormVisible=!0},handleDel:function(e,t){var a=this;this.$confirm("此操作将永久删除该账户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(o.c)(e.serial).then(function(e){if(e.detail)return a.$message.error(e.detail),!1;a.list.splice(t,1)}).then(function(){a.$message({type:"success",message:"删除成功!"})})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})}},create:function(){this.getAllDept()}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"warp-box"},[a("curmbs"),e._v(" "),a("div",{staticClass:"container"},[a("handleBox",{attrs:{handleConfig:e.handleConfig},on:{delAll:e.delAll,search:e.search,newItem:e.newItem}}),e._v(" "),a("opTable",{attrs:{list:e.list,total:e.total,options:e.options,pagination:e.pagination,columns:e.columns,operates:e.operates,getList:e.getList},on:{handleSizeChange:e.handleSizeChange,handleIndexChange:e.handleIndexChange,handleSelectionChange:e.handleSelectionChange}}),e._v(" "),a("el-dialog",{ref:"formDialog",attrs:{title:e.dialogTitle,visible:e.dialogFormVisible,"before-close":e.handleClose,modal:!1,"lock-scroll":!0},on:{"update:visible":function(t){e.dialogFormVisible=t},open:e.open,opened:e.handleOpen}},[a("jsonForm",{ref:"formData",attrs:{handleType:e.handleType,formData:e.formData,rules:e.rulesList,formItems:e.formItems,formOptions:e.formOptions},on:{handleCofirm:e.handleCofirm,handleCancle:function(t){e.dialogFormVisible=!1}}})],1)],1)],1)},staticRenderFns:[]};var c=a("C7Lr")(l,p,!1,function(e){a("DqIV")},"data-v-dd1ef11c",null);t.default=c.exports}});