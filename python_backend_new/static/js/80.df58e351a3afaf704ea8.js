webpackJsonp([80],{Q4Hy:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("a3Yh"),n=i.n(a),l=i("aA9S"),o=i.n(l),s=i("D4TX"),r=i("GOyC"),d=i("R5Jg"),h=i("IkF9"),c=i("pxwZ"),p="/system/topsearch/",u=i("8V1Y"),g=n()({data:function(){var e=this;return{dialogTitle:"",pparamAll:[{value:0,label:"一级分类"}],dialogFormVisible:!1,serial:"",rules:{},currentEditLine:0,select_word:"",formData:{},handleType:"new",saveStartTime:"",handleOne:!0,formOptions:{labelWidth:"160px"},formItems:[{prop:"word",label:"热搜词",type:"input",rules:[{required:!0,message:"该项为必填项",trigger:"blur"}],eleProps:{placeholder:"请填写热搜词"}},{prop:"word_order",label:"热搜词顺序",type:"select",rules:[{required:!0,message:"请选择热搜词顺序",trigger:"blur"}],eleProps:{placeholder:"请填写热搜词顺序"},options:u.a.topsearchTypeOptions},{prop:"is_artifical",label:"产生方式",type:"select",rules:[{required:!0,message:"请选择产生方式",trigger:"blur"}],eleProps:{placeholder:"请填写产生方式"},options:u.a.topsearchType}],handleConfig:{searchTerms:[{value:"1",label:"条件一"},{value:"2",label:"条件二"},{value:"3",label:"条件三"}],newItemTxt:"新增热搜词",delBtn:!1,auditBtn:!1},total:0,list:[],fileList:[],columns:[{prop:"word",label:"热搜词",align:"center",width:180,formatter:function(e,t,i){return e[t.prop]}},{prop:"word_order",label:"热搜词顺序",align:"center",width:180,formatter:function(e,t,i){return e[t.prop]}},{prop:"is_artifical",label:"产生方式",align:"center",width:180,formatter:function(e,t,i){return e[t.prop]}},{prop:"insert_time",label:"添加时间",align:"center",width:180,formatter:function(e,t,i){return e[t.prop]}}],operates:{width:300,fixed:"right",list:[{label:"编辑",type:"warning",show:function(e,t){return!0},icon:"el-icon-edit",plain:!0,disabled:!1,method:function(t,i){e.handleEdit(t,i)}},{label:"删除",type:"danger",icon:"el-icon-delete",show:!0,plain:!1,disabled:!1,method:function(t,i){e.handleDel(t,i)}}]},pagination:{pageIndex:1,pageSize:10,show:!0,total:0},options:{stripe:!0,loading:!1,highlightCurrentRow:!0,mutiSelect:!0}}},components:{jsonForm:h.a,curmbs:s.a,handleBox:r.a,opTable:d.a},computed:{},methods:{delAll:function(){},resetExtrForm:function(){var e=this;this.formItems.forEach(function(t,i){e.$set(e.formData,t.prop,t.$default),t.state&&(t.defaultList=[]),void 0!==t.defaultValue&&e.$nextTick(function(){t.defaultValue=null})})},search:function(e,t){this.select_word=t,this.getList()},getList:function(){var e,t=this;this.options.loading=!0,(e={params:{page:this.pagination.pageIndex,page_size:this.pagination.pageSize,search:this.select_word}},Object(c.b)(p,e)).then(function(e){e.detail&&t.$message.error(e.detail),t.total=e.count,t.pagination.total=Number(e.count),t.list=e.results,t.options.loading=!1})},newItem:function(){this.resetExtrForm(),this.dialogTitle="新增热搜词",this.currentEditLine=0,this.handleType="new",this.dialogFormVisible=!0},handleCancle:function(){this.dialogFormVisible=!1},handleClose:function(e){this.dialogFormVisible=!1,e()},handleCofirm:function(e){var t,i,a,n=this;if(!this.$refs.formmodel.validateForm())return!1;"edit"==this.handleType?(i=this.serial,a=e,Object(c.c)(p+i+"/",a)).then(function(e){e.detail&&n.$message.error(e.detail),n.list.splice(n.currentEditLine,1,e),n.dialogFormVisible=!1,n.$message({type:"success",message:"编辑成功!"}),n.getList()}):(t=e,Object(c.d)(p,t)).then(function(e){e.detail&&n.$message.error(e.detail),n.list.splice(0,0,e),n.dialogFormVisible=!1,n.$message({type:"success",message:"添加成功!"}),n.getList()})},handleEdit:function(e,t){this.resetExtrForm(),this.handleOne=!1,this.currentEditLine=t,this.dialogTitle="编辑需求信息",this.handleType="edit",this.serial=e.serial,this.dialogFormVisible=!0,this.formData=o()({},e),this.saveStartTime=e.expiry_dateb},handleSizeChange:function(e){this.pagination=e,console.log("handleSizeChange:"+this.pagination.pageSize),this.getList()},handleIndexChange:function(e){this.pagination=e,console.log("handleIndexChange:"+this.pagination.pageIndex),this.getList()},handleSelectionChange:function(e){},handleDetail:function(e,t){this.$router.push({name:"topsearchdetail",query:{serial:e.serial}})},handleDel:function(e,t){var i=this;this.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a;(a=e.serial,Object(c.a)(p+a+"/")).then(function(e){e.detail&&i.$message.error(e.detail),i.list.splice(t,1)}).then(function(){i.$message({type:"success",message:"删除成功!"})})}).catch(function(){i.$message({type:"info",message:"已取消删除"})})}}},"computed",{}),m={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"warp-box"},[i("curmbs"),e._v(" "),i("div",{staticClass:"container"},[i("handleBox",{attrs:{handleConfig:e.handleConfig},on:{delAll:e.delAll,search:e.search,newItem:e.newItem}}),e._v(" "),i("opTable",{attrs:{list:e.list,total:e.total,options:e.options,pagination:e.pagination,columns:e.columns,operates:e.operates,getList:e.getList},on:{handleSizeChange:e.handleSizeChange,handleIndexChange:e.handleIndexChange,handleSelectionChange:e.handleSelectionChange}}),e._v(" "),i("el-dialog",{ref:"formDialog",attrs:{title:e.dialogTitle,visible:e.dialogFormVisible,"before-close":e.handleClose,modal:!1,"lock-scroll":!0},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("jsonForm",{ref:"formmodel",attrs:{handleType:e.handleType,formData:e.formData,formItems:e.formItems,formOptions:e.formOptions},on:{handleCofirm:e.handleCofirm,handleCancle:function(t){e.dialogFormVisible=!1}}})],1)],1)],1)},staticRenderFns:[]};var f=i("C7Lr")(g,m,!1,function(e){i("gQfv")},"data-v-53355de6",null);t.default=f.exports},gQfv:function(e,t){}});