webpackJsonp([8],{"/noD":function(e,t){},bQkZ:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("D4TX"),i=r("GOyC"),s=r("R5Jg"),o=r("qeYQ"),n=r("9pcb"),l={data:function(){var e=this;return{dialogTitle:"",dialogFormVisible:!1,serial:"",ruleType:1,currentEditLine:0,select_word:"",formData:{},handleType:"new",formOptions:{},formItems:[{prop:"name",text:"姓名",label:"姓名",type:"input",eleProps:{placeholder:"请输入姓名"},rules:[{required:!0,message:"请输入用户名",trigger:"blur"}]},{prop:"phone",text:"手机号码",label:"手机号码",type:"input",eleProps:{placeholder:"请输入手机号码",maxlength:11},rules:[{required:!0,message:"请输入手机号码",trigger:["change","blur"]},{pattern:/^1[3-9]\d{9}$/,message:"请正确输入手机号",trigger:["change","blur"]}]},{prop:"email",text:"邮箱",label:"邮箱",type:"input",eleProps:{placeholder:"请填写邮箱",type:"email"},rules:[{required:!0,type:"email",message:"请输入正确的邮箱地址",trigger:["change","blur"]}]},{prop:"tel",text:"固话",label:"固话",type:"input",eleProps:{placeholder:"请输入固定电话"}},{type:"selectregion",prop:"district_id",label:"归属城市",$default:"",eleProps:{placeholder:"请选择归属城市"},rules:[{type:"number",required:!0,message:"请选择归属城市",trigger:"change"}]}],handleConfig:{searchTerms:[{value:"1",label:"条件一"},{value:"2",label:"条件二"},{value:"3",label:"条件三"}],newItemTxt:"新增联系人",delBtn:!1},total:0,list:[],columns:[{prop:"city",label:"所属城市",align:"center"},{prop:"name",label:"名称",align:"center"},{prop:"phone",label:"联系电话",align:"center"},{prop:"email",label:"邮箱",align:"center"},{prop:"tel",label:"固定电话",align:"center"}],operates:{width:200,fixed:"right",list:[{label:"编辑",type:"warning",show:function(e,t){return!0},icon:"el-icon-edit",plain:!0,disabled:!1,method:function(t,r){e.handleEdit(t,r)}},{label:"删除",type:"danger",icon:"el-icon-delete",show:!0,plain:!1,disabled:!1,method:function(t,r){e.handleDel(t,r)}}]},pagination:{pageIndex:1,pageSize:10,show:!0,total:0},options:{stripe:!0,loading:!1,highlightCurrentRow:!0,mutiSelect:!0}}},components:{jsonForm:o.a,curmbs:a.a,handleBox:i.a,opTable:s.a},computed:{rulesList:function(){return"edit"==this.handleType?this.rules3:1==this.ruleType?this.rules:this.rules2}},methods:{handleOpen:function(){this.$refs.formData.clearValidateForm(),this.$refs.formData.initSelect()},handleClose:function(e){this.$refs.formData.handleCancle(),e()},handleCofirm:function(e){var t=this;if(!this.$refs.formData.validateForm())return!1;"edit"==this.handleType?(console.log(this.serial),Object(n.o)(this.serial,e).then(function(e){if(e.detail)return t.$message.error(e.detail),!1;t.list.splice(t.currentEditLine,1,e),t.dialogFormVisible=!1,t.getList(),t.$message({type:"success",message:"编辑成功!"}),console.log(t.$refs.formData),t.$refs.formData.resetDeptCarser()})):Object(n.n)(e).then(function(e){if(e.detail)return t.$message.error(e.detail),!1;t.list.splice(0,0,e),t.dialogFormVisible=!1,t.getList(),t.$message({type:"success",message:"添加成功!"}),console.log(t.$refs.formData),t.$refs.formData.resetDeptCarser()})},newItem:function(){for(var e=0;e<this.formItems.length;e++)"switch"==this.formItems[e].type?this.$set(this.formData,this.formItems[e].prop,1):"account_type"==this.formItems[e].prop?(this.$set(this.formItems[0],"show",!0),this.$set(this.formData,this.formItems[e].prop,1)):this.$set(this.formData,this.formItems[e].prop,null),"account"==this.formItems[e].prop&&(this.formItems[e].eleProps.disabled=!0,this.$set(this.formItems[0],"show",!0));this.dialogTitle="新增联系人",this.currentEditLine=0,this.handleType="new",this.dialogFormVisible=!0},search:function(e,t){console.log("search:"+e+","+t),this.select_word=t,this.getList()},delAll:function(){console.log("delAll")},getList:function(){var e=this;this.options.loading=!0,Object(n.j)({params:{page:this.pagination.pageIndex,page_size:this.pagination.pageSize,search:this.select_word}}).then(function(t){t.detail&&e.$message.error(t.detail),e.total=t.count,e.pagination.total=Number(t.count),e.list=t.results,e.options.loading=!1})},handleSizeChange:function(e){this.pagination=e,console.log("handleSizeChange:"+this.pagination.pageSize),this.getList()},handleIndexChange:function(e){this.pagination=e,console.log("handleIndexChange:"+this.pagination.pageIndex),this.getList()},handleSelectionChange:function(e){console.log("val:",e)},handleEdit:function(e,t){this.currentEditLine=t,this.dialogTitle="编辑联系人信息",this.handleType="edit",this.serial=e.serial;for(var r=0;r<this.formItems.length;r++)void 0!==e[this.formItems[r].prop]&&(e[this.formItems[r].prop]?this.$set(this.formData,this.formItems[r].prop,e[this.formItems[r].prop]):this.$set(this.formData,this.formItems[r].prop,null)),"account"==this.formItems[r].prop&&(this.formData.account?this.formItems[r].eleProps.disabled=!0:this.formItems[r].eleProps.disabled=!1,this.$set(this.formItems[0],"show",!1));this.dialogFormVisible=!0},handleDel:function(e,t){var r=this;this.$confirm("此操作将永久删除该信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(n.d)(e.serial).then(function(e){e.detail&&r.$message.error(e.detail),r.list.splice(t,1)}).then(function(){r.$message({type:"success",message:"删除成功!"})})}).catch(function(){r.$message({type:"info",message:"已取消删除"})})}},create:function(){this.getAllDept()}},p={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"warp-box"},[r("curmbs"),e._v(" "),r("div",{staticClass:"container"},[r("handleBox",{attrs:{handleConfig:e.handleConfig},on:{delAll:e.delAll,search:e.search,newItem:e.newItem}}),e._v(" "),r("opTable",{attrs:{list:e.list,total:e.total,options:e.options,pagination:e.pagination,columns:e.columns,operates:e.operates,getList:e.getList},on:{handleSizeChange:e.handleSizeChange,handleIndexChange:e.handleIndexChange,handleSelectionChange:e.handleSelectionChange}}),e._v(" "),r("el-dialog",{ref:"formDialog",attrs:{title:e.dialogTitle,visible:e.dialogFormVisible,"before-close":e.handleClose,modal:!1,"lock-scroll":!0},on:{"update:visible":function(t){e.dialogFormVisible=t},opened:e.handleOpen}},[r("jsonForm",{ref:"formData",attrs:{handleType:e.handleType,formData:e.formData,formItems:e.formItems,formOptions:e.formOptions},on:{handleCofirm:e.handleCofirm,handleCancle:function(t){e.dialogFormVisible=!1}}})],1)],1)],1)},staticRenderFns:[]};var d=r("C7Lr")(l,p,!1,function(e){r("eBCm")},"data-v-23f3f21e",null);t.default=d.exports},eBCm:function(e,t){},qeYQ:function(e,t,r){"use strict";var a=r("aA9S"),i=r.n(a),s=r("SdNV"),o=r("UV6F"),n=r("Fdse"),l=r("/b2t"),p={props:{rules:{type:Object,default:function(){}},formData:{type:Object,default:function(){}},formOptions:{type:Object,default:function(){}},formItems:{type:Array,default:function(){return[]}},formBtnList:{type:Array,default:function(){return[]}},handleType:String,handleCancleBtn:String},data:function(){return{defaultOptions:{labelPosition:"left",labelWidth:"80px",size:"medium",disabled:!1,hideRequiredAsterisk:!1}}},components:{deptGroup:s.a,regionGroup:o.a,uploadfile:n.a,Editor:l.a},methods:{Sumbit:function(e,t,r){this.$emit("successUpload",e,t,r)},editData:function(e){},handleCofirm:function(){this.$refs.deptCarser&&this.$refs.deptCarser[0].getSelected(),this.$refs.regionCarser&&this.$refs.regionCarser[0].getSelected(),this.$emit("handleCofirm",this.formData)},handleCancle:function(){this.$refs.formData.resetFields(),this.$refs.deptCarser&&this.$refs.deptCarser[0].resetSelect(),this.$refs.regionCarser&&this.$refs.regionCarser[0].resetSelect(),this.$refs.editorPage&&this.$refs.editorPage[0].resetEditor(),this.clearValidateForm(),this.$emit("handleCancle")},initSelect:function(){this.$refs.deptCarser&&this.$refs.deptCarser[0].init(),this.$refs.regionCarser&&this.$refs.regionCarser[0].init()},handleClick:function(e){this.$refs.deptCarser&&this.$refs.deptCarser[0].getSelected(),this.$refs.regionCarser&&this.$refs.regionCarser[0].getSelected(),"function"==typeof this[e]?this[e]():this.$emit(e)},resetForm:function(e){e?this.$refs.formData.resetFields(e):this.$refs.formData.resetFields()},clearValidateForm:function(){this.$refs.formData.clearValidate()},validateForm:function(){var e=this,t=!1;return this.$refs.formData.validate(function(r,a){r?t=!0:(e.$message({type:"error",message:"表单验证失败"}),t=!1)}),t},resetDeptCarser:function(){this.$refs.deptCarser&&this.$refs.deptCarser[0].resetSelect(),this.$refs.regionCarser&&this.$refs.regionCarser[0].resetSelect()}},created:function(){this.$parent.$parent.formOptions?this.$parent.$parent.formOptions=i()({labelPosition:"right",labelWidth:"80px",size:"medium",disabled:!1,hideRequiredAsterisk:!1},this.formOptions):this.$parent.formOptions=i()({labelPosition:"right",labelWidth:"80px",size:"medium",disabled:!1,hideRequiredAsterisk:!1},this.formOptions)}},d={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"form-model"},[r("el-form",e._b({ref:"formData",attrs:{model:e.formData,"validate-on-rule-change":!1}},"el-form",e.formOptions,!1),[e._l(e.formItems,function(t){return[void 0==t.show||t.show?r("el-form-item",{key:t.prop,attrs:{prop:t.prop,rules:t.rules,label:t.label}},["selectgroup"==t.type?r("deptGroup",{ref:"deptCarser",refInFor:!0,model:{value:e.formData[t.prop],callback:function(r){e.$set(e.formData,t.prop,r)},expression:"formData[item.prop]"}}):"editor"==t.type?r("Editor",{ref:"editorPage",refInFor:!0,attrs:{operation:"File_Result_Owner_Ent_Path",defaultValue:t.defaultValue,apiUrl:t.apiUrl},on:{editData:function(r){return e.editData(t)}},model:{value:e.formData[t.prop],callback:function(r){e.$set(e.formData,t.prop,r)},expression:"formData[item.prop]"}}):"selectregion"==t.type?r("regionGroup",{ref:"regionCarser",refInFor:!0,model:{value:e.formData[t.prop],callback:function(r){e.$set(e.formData,t.prop,r)},expression:"formData[item.prop]"}}):"upload"==t.type?r("uploadfile",{ref:"uploadfile",refInFor:!0,attrs:{listType:t.listType,flag:t.state,acceptType:t.acceptType,fileList:t.fileList,icon:t.icon},on:{Sumbit:e.Sumbit},model:{value:e.formData[t.prop],callback:function(r){e.$set(e.formData,t.prop,r)},expression:"formData[item.prop]"}}):"onlytime"==t.type?r("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间"},model:{value:e.formData[t.prop],callback:function(r){e.$set(e.formData,t.prop,r)},expression:"formData[item.prop]"}}):"multipletime"==t.type?r("el-date-picker",{attrs:{type:"datetimerange","value-format":"yyyy-MM-dd HH:mm:ss","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.formData[t.prop],callback:function(r){e.$set(e.formData,t.prop,r)},expression:"formData[item.prop]"}}):r("el-"+t.type,e._b({tag:"component",attrs:{"trigger-on-focus":!1},on:{change:function(e){t.change&&t.change(e)}},model:{value:e.formData[t.prop],callback:function(r){e.$set(e.formData,t.prop,r)},expression:"formData[item.prop]"}},"component",t.eleProps||{},!1),["select"==t.type?e._l(t.options,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}):e._e(),e._v(" "),"radio-group"==t.type?e._l(t.options,function(t){return r("el-radio",{key:t.value,attrs:{label:t.label}},[e._v(e._s(t.value))])}):e._e(),e._v(" "),"checkbox-group"==t.type?e._l(t.options,function(t){return r("el-checkbox",{key:t.value,attrs:{label:t.label}},[e._v(e._s(t.value))])}):e._e()],2)],1):e._e()]})],2),e._v(" "),r("div",{staticClass:"dialog-footer text-right"},[e.formBtnList.length&&e.formBtnList.length>0?e._l(e.formBtnList,function(t,a){return r("el-button",{key:a,attrs:{type:t.type,size:t.size||"small",icon:t.icon,disabled:t.disabled,plain:t.plain},on:{click:function(r){return e.handleClick(t.method)}}},[e._v(e._s(t.label))])}):[r("el-button",{on:{click:e.handleCancle}},[e._v(e._s(e.handleCancleBtn?e.handleCancleBtn:"取消"))]),e._v(" "),r("el-button",{attrs:{type:"success"},on:{click:e.handleCofirm}},[e._v(e._s("new"==e.handleType?"添 加":"edit"==e.handleType?"修改":e.handleType))])]],2)],1)},staticRenderFns:[]};var c=r("C7Lr")(p,d,!1,function(e){r("/noD")},"data-v-1dccdf0e",null);t.a=c.exports}});